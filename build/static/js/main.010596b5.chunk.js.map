{"version":3,"sources":["test.mp3","img/example-cover.jpg","config.ts","api/Api.tsx","api/Hooks.tsx","api/Audio.tsx","components/Cell.tsx","components/Shared.tsx","components/ActiveSong.tsx","components/Artists.tsx","components/NavBar.tsx","components/Player.tsx","components/PlaylistsBar.tsx","components/SongList.tsx","components/Playlists.tsx","components/Albums.tsx","components/Songs.tsx","components/Dialog.tsx","api/Seeder.ts","components/Seeder.tsx","api/FakeApi.ts","components/Login.tsx","components/App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","API_URL","API","observers","Set","observer","url","params","callback","this","fetch","then","r","catch","undefined","Error","forEach","o","call","add","delete","endpoint","query","querystring","encode","method","require","headers","getApiKey","response","console","log","body","getReader","read","content","value","blob","Blob","type","URL","createObjectURL","args","update","startsWith","toUpperCase","JSON","stringify","status","json","useApi","useState","result","setResult","loading","setLoading","useEffect","subscribe","Loading","className","useLoading","enpoint","render","context","createContext","play","pause","position","shuffle","repeat","setShuffle","setRepeat","playing","Provider","usePlayer","useContext","SongButton","song","s","selected","id","onClick","icon","faPause","faPlay","Cell","props","children","area","style","other","gridArea","ICONS","faHeadphones","faMusic","faGuitar","faDrum","faRecordVinyl","faCompactDisc","Cover","src","alt","rest","hasImage","setImage","useMemo","Math","floor","random","length","onLoad","onError","draggable","ModelView","useParams","ModelSidebar","Single","match","m","name","active","objects","map","key","classes","toString","to","ActiveCover","album","cover_url","ActiveSong","Artist","albums","a","Album","release","songs","t","SongRow","rowSpan","Artists","Nav","path","useLocation","pathname","links","href","text","faList","faUser","IconButton","timestamp","time","minutes","seconds","toFixed","padStart","SongInfo","title","artists","width","Volume","volume","setVolume","saveVolumed","saveVolume","toggleVolume","useVolume","faVolumeMute","faVolumeDown","faVolumeUp","adjust","e","w","currentTarget","offsetWidth","l","getBoundingClientRect","left","x","clientX","v","round","onMouseMove","buttons","Player","faStepBackward","faStepForward","faRandom","faRedoAlt","Playlist","LoadingSongRow","Songs","Active","SongList","Playlists","p","Albums","DialogContext","React","Dialog","dialog","close","open","useDialog","TransitionGroup","CSSTransition","timeout","i","click","songNames","artistNames","range","array","sort","b","slice","min","SEEDER","count","artistIds","resource_uri","Array","fill","_","millis","Promise","res","setTimeout","generator","songer","setMessage","setProgress","Api","old","setTotal","all","error","post","seedModels","wait","Endpoint","models","Seeder","progress","total","message","endpoints","Object","keys","filter","disabled","seed","fakes","Map","fake","get","push","put","find","n","indexOf","data","set","rej","window","cb","fakeFor","f","Login","username","setUsername","password","setPassword","placeholder","onChange","target","required","Page","page","document","charAt","toLowerCase","component","App","audio","setSong","setPosition","currentTime","Audio","addEventListener","removeEventListener","duration","paused","useCreateAudio","pages","PlaylistsBar","exact","Boolean","location","hostname","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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,OChB3D2D,OANf,WACI,OAAOpI,EAAyB,QAAQ,gBAAG6D,EAAH,EAAGA,QAAH,OACpC,kBAACyE,GAAD,CAAU1D,MAAOf,Q,kBC+BzB,IAAM6E,GAAgBC,IAAMvI,cAGzB,CAAC,KAAM,eAQH,IAAMS,GAAW6H,GAAc7H,SAEvB+H,GAvCf,YAA6D,IAA3CC,EAA0C,EAA1CA,OACNC,EA8BL,WAAsB,IAAD,EACP/H,qBAAW2H,IAAnBK,EADe,oBAGxB,MAAO,CAAEA,OAAMD,MADD,kBAAMC,EAAK,QAhCPC,GAAVF,MAER,OACI,kBAACG,GAAA,EAAD,KACKJ,GACG,kBAACK,GAAA,EAAD,CAAenF,IAAI,SAASoF,QAAS,KACjC,yBAAKpJ,UAAU,UACX,2BAAI8I,EAAOtD,MACX,4BACKsD,EAAOjB,QAAQ9D,KAAI,WAA6BsF,GAA7B,IAAG7D,EAAH,EAAGA,KAAMxF,EAAT,EAASA,UAAWsJ,EAApB,EAAoBA,MAApB,OAChB,0CAAQtF,IAAKqF,EAAG/H,QAAS,WACjBgI,GAAOA,IACXP,MACG,CAAE/I,cACJwF,WCvB/B+D,GAAY,CACd,iBACA,wBACA,wBACA,eACA,sBACA,gBACA,sBACA,aACA,kBACA,SACA,WACA,4BACA,yBACA,qBACA,4BACA,sBACA,kBACA,mBACA,sBACA,iBACA,qBACA,UACA,eACA,oBACA,6BACA,2BACA,+BACA,sBACA,kBACA,gBACA,oBACA,OACA,SACA,0BACA,mCACA,sBACA,oBACA,4BACA,uBACA,0BACA,mBACA,iBACA,iBACA,YACA,cACA,mBACA,+BACA,aACA,yBACA,iBACA,sBACA,WACA,gBACA,QACA,QACA,qBACA,8BACA,qBACA,qBACA,qBACA,wBACA,uBACA,kBACA,mBACA,iBACA,UAGEC,GAAc,CAChB,gBACA,eACA,kBACA,SACA,8BACA,iBACA,kBACA,wBACA,qBACA,YACA,iBACA,gBACA,QACA,eACA,eACA,gBACA,eACA,SACA,+BACA,eACA,iBACA,gBACA,cACA,eACA,gBACA,SACA,gBACA,YACA,QACA,cACA,aACA,gBACA,kBAC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","file":"static/js/main.010596b5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/test.cf56ed92.mp3\";","module.exports = __webpack_public_path__ + \"static/media/example-cover.b2e600a7.jpg\";","export const DEV = !process.env.NODE_ENV || process.env.NODE_ENV === 'development';\n\n//const BASE_URL = DEV ? 'https://de0.win' : '';\nconst BASE_URL = '';\nexport const API_URL = `${BASE_URL}/api/v1`;","import querystring, { ParsedUrlQueryInput } from 'querystring';\nimport { API_URL } from '../config';\n\n/**\n * Replaced once we know the format the data will be sent by the server\n */\ntype Response<O> = O;\n\n\ninterface IObserver<O> {\n    url: string;\n    params?: ParsedUrlQueryInput | string;\n    callback: (result?: O, error?: Error) => unknown;\n}\n\nexport interface IApi {\n\n    subscribe<O>(url: string, params?: ParsedUrlQueryInput | string): ({\n        then: (callback: (result?: O | undefined, error?: Error | undefined) => unknown) => () => void;\n    });\n\n    post<O>(url: string, args: any): Promise<O>;\n\n    delete<O>(url: string, args: any): Promise<O>;\n\n    put<O>(url: string, args: any): Promise<O>;\n\n}\n\ntype Method = 'post' | 'delete' | 'put' | 'get';\nclass Api implements IApi {\n\n    private observers: Set<IObserver<any>> = new Set();\n\n    call<O>(observer: IObserver<O>) {\n        const { url, params, callback } = observer;\n        this.fetch<O>(url, params)\n            .then(r => callback(r))\n            .catch(() => callback(undefined, new Error(`Unable to fetch ${url}`)));\n    }\n\n    update() {\n        this.observers.forEach(o => this.call(o));\n    }\n\n    subscribe<O>(url: string, params?: ParsedUrlQueryInput | string) {\n        return {\n            then: (callback: (result?: O, error?: Error) => unknown) => {\n                const o = { url, params, callback };\n                this.observers.add(o);\n                this.call(o);\n                return () => {\n                    this.observers.delete(o);\n                }\n            }\n        }\n    }\n\n    async fetch<O>(endpoint: string, params?: ParsedUrlQueryInput | string) {\n        const query = typeof params === 'string' ? params : querystring.encode(params ?? {});\n        return this.method<O>('get', `${endpoint}/?${query}`);\n    }\n\n    private getApiKey() {\n        return 'webuserkey';\n    }\n\n    public async audio(url: string) {\n\n        const response = await fetch(require('../test.mp3'), {\n            //const response = await fetch(url, {\n            headers: {\n                'Authorization': this.getApiKey()\n            }\n        });\n\n        console.log(response);\n\n        const content = await response.body?.getReader().read();\n        if (!content?.value) throw new Error('No audio found');\n\n        const blob = new Blob([content.value], { type: 'audio/mp3' })\n        return URL.createObjectURL(blob);\n\n    }\n\n    private async method<O>(method: Method, endpoint: string, args?: any, update = true) {\n\n        let url = endpoint;\n        if (!url.startsWith(API_URL)) url = `${API_URL}/${url}`\n        if (method !== 'get') url += '/';\n\n        const response = await fetch(url, {\n            method: method.toUpperCase(),\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': this.getApiKey(),\n            },\n            body: args ? JSON.stringify(args) : undefined,\n        });\n\n        if (update && method !== 'get') this.update();\n\n        if (response.status === 200)\n            return response.json() as Promise<Response<O>>;\n        else\n            return {} as Response<O>;\n\n    }\n\n    async post<O = string>(url: string, args: any = {}, update = true) {\n        return this.method<O>('post', url, args, update);\n    }\n\n    async put<O = string>(url: string, args: any = {}, update = true) {\n        return this.method<O>('put', url, args, update);\n    }\n\n    async delete<O = string>(url: string, args: any = {}, update = true) {\n        return this.method<O>('delete', url, args, update);\n    }\n\n}\n\nconst API = new Api();\n\nexport default API;","import querystring, { ParsedUrlQueryInput } from 'querystring';\nimport React, { SyntheticEvent, useEffect, useState } from 'react';\nimport API from './Api';\n\n/**\n * React hook to subscibe to a specific api endpoint\n * @param endpoint The url\n * @param params Optional query parameters\n */\nexport function useApi<R>(endpoint: string, params?: ParsedUrlQueryInput) {\n    const [result, setResult] = useState<undefined | R>();\n    const [loading, setLoading] = useState(true);\n\n    const query = querystring.encode(params);\n    useEffect(() => {\n        setLoading(true);\n        setResult(undefined);\n\n        return API.subscribe<R>(endpoint, query).then(r => {\n            setResult(r);\n            setLoading(false);\n        })\n    }, [query, endpoint]);\n\n    return [result, loading] as [R | undefined, boolean];\n}\n\n/**\n * React hook to send post requests\n * @param endpoint The url\n * @param data Optional body data\n * @param cb Optional callback function called on success with the response\n */\nexport function useSubmit<R = any>(endpoint: string, data?: any, cb?: (r?: R) => unknown) {\n    const [error, setError] = useState<any>();\n    const [inProgress, setLoading] = useState(false);\n\n    const post = (e?: SyntheticEvent) => {\n        e?.preventDefault();\n        setLoading(true);\n        API.post<R>(endpoint, data)\n            .then(r => {\n                if (cb) cb(r);\n                return undefined;\n            })\n            .catch(e => e as Error)\n            .then(e => {\n                setError(e);\n                setLoading(false);\n            });\n    }\n\n    const message = error?.message;\n    return { message, error, valid: !message, post, inProgress };\n}\n\n/**\n * A universal loading component\n */\nexport function Loading() {\n    return <span className='loading' />;\n}\n\nexport type Render<R> = (result: R) => JSX.Element | null;\n\n/**\n * React hook to render loading componets universally\n * @param enpoint The api url\n * @param params Optional query parameters\n * @param render The render function called once the data has been received\n */\nexport function useLoading<R>(enpoint: string, params: ParsedUrlQueryInput | Render<R>, render?: Render<R>): JSX.Element | null {\n    const p = typeof params === 'object' ? params : undefined;\n    const r = typeof params === 'function' ? params : render;\n    const [result, loading] = useApi<R>(enpoint, p);\n\n    if (loading) return <Loading />\n    if (!result) return <span>Not found</span>\n    return r ? r(result) : null;\n}","import React, { useState, useEffect, useMemo, createContext, useContext } from \"react\";\nimport { ISong } from \"./Models\";\nimport Api from \"./Api\";\nimport { FontAwesomeIcon as Icon } from \"@fortawesome/react-fontawesome\";\nimport { faPlay, faPause } from \"@fortawesome/free-solid-svg-icons\";\n\ninterface PlayerData {\n    song?: ISong;\n    play: (t?: ISong) => void;\n    pause: () => void;\n    position: number;\n    shuffle: boolean;\n    repeat: boolean;\n    setShuffle: (b: boolean) => void;\n    setRepeat: (b: boolean) => void;\n    playing: () => boolean;\n}\n\nconst context = createContext<PlayerData>({\n    play: () => { },\n    pause: () => { },\n    position: 0,\n    shuffle: false,\n    repeat: false,\n    setShuffle: () => { },\n    setRepeat: () => { },\n    playing: () => false,\n});\n\nexport const Provider = context.Provider;\n\nexport function usePlayer(): PlayerData {\n    return useContext(context);\n}\n\n/**\n * Can be used anywhere to access and modify volume\n * TODO This is where the actual volume logic will happen\n */\nexport function useVolume() {\n    const [volume, setVolume] = useState(40);\n    const [saveVolumed, saveVolume] = useState(volume);\n\n    const toggleVolume = () => {\n        if (volume > 0) {\n            saveVolume(volume);\n            setVolume(0);\n        } else {\n            setVolume(saveVolumed);\n        }\n    }\n\n    return { volume, setVolume, toggleVolume };\n}\n\nexport function useCreateAudio(): PlayerData {\n    const [song, setSong] = useState<ISong | undefined>(undefined);\n    const [shuffle, setShuffle] = useState(false);\n    const [repeat, setRepeat] = useState(true);\n    const [position, setPosition] = useState(0);\n\n    const update = () => setPosition(audio.currentTime);\n\n    const audio = useMemo(() => new Audio(), []);\n\n    useEffect(() => {\n        audio.addEventListener('timeupdate', update);\n        return () => audio.removeEventListener('timeupdate', update);\n    }, [audio])\n\n    const play = async (song?: ISong) => {\n\n        if (song) await Api.audio(song.audio)\n            .then(src => {\n                setSong(song);\n\n                audio.src = src;\n                audio.currentTime = 0;\n                audio.play();\n\n            }).catch(e => console.log(e));\n\n        else await audio?.play();\n    }\n\n    const pause = () => {\n        audio?.pause();\n    }\n\n    return {\n        song: song ? { ...song, length: audio.duration } : undefined,\n        play, pause,\n        shuffle, repeat, setShuffle, setRepeat,\n        playing: () => !!audio && !audio.paused,\n        position,\n    };\n}\n\nexport function SongButton({ song }: { song: ISong }) {\n    const { play, pause, playing, song: s } = usePlayer();\n    const selected = song.id === s?.id;\n\n    const onClick = () => {\n        if (selected) {\n            if (playing()) pause();\n            else play();\n        } else play(song);\n    }\n\n    return (\n        <button className='song-button' {...{ onClick }}>\n            <Icon icon={(selected && playing()) ? faPause : faPlay} />\n        </button>\n    );\n}\n\nexport default usePlayer;","import React, { ReactNode, HTMLAttributes } from 'react';\n\nfunction Cell(props: { area: string, children?: ReactNode } & HTMLAttributes<HTMLDivElement>) {\n    const { children, className, area, style, ...other } = props;\n    return (\n        <div className={`${className ?? ''} ${area}`} style={{ gridArea: area, position: 'relative', ...style }} {...other}>\n            {children}\n        </div>\n    );\n}\n\nexport default Cell;","import classes from 'classnames';\nimport React, { useMemo, useState, CSSProperties } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { Render, useLoading } from '../api/Hooks';\nimport { IList, IModel } from '../api/Models';\nimport Cell from './Cell';\nimport { faHeadphones, faMusic, faGuitar, faDrum, faRecordVinyl, faCompactDisc } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon as Icon } from '@fortawesome/react-fontawesome';\n\nconst ICONS = [faHeadphones, faMusic, faGuitar, faDrum, faRecordVinyl, faCompactDisc];\n\nexport function Cover(props: { alt: string, src?: string } & CSSProperties) {\n    const { src, alt, ...rest } = props;\n    const [hasImage, setImage] = useState(false);\n\n    const icon = useMemo(() => ICONS[Math.floor(Math.random() * ICONS.length)], [])\n\n    return <Cell area='cover' style={{ ...rest }}>\n        <img\n            onLoad={() => setImage(true)}\n            onError={() => setImage(false)}\n            draggable={false}\n            {... { alt, src }}\n        />\n        {!hasImage && <Icon icon={icon} />}\n    </Cell>\n}\n\nexport function ModelView<M extends IModel>(props: { endpoint: string, render: Render<M> }) {\n    const { endpoint } = props;\n    const { id } = useParams();\n\n    return (\n        <>\n            <ModelSidebar {...{ endpoint }} />\n            <Cell area='active'>\n                {id\n                    ? <Single {...{ id }} {...props} />\n                    : <h1>Select a{endpoint.match(/^[aeiou]/i) ? 's' : ''} {endpoint}</h1>\n                }\n            </Cell>\n        </>\n    )\n}\n\nfunction Single<M extends IModel>(props: { endpoint: string, id: string, render: Render<M> }) {\n    const { id, endpoint, render } = props;\n    return useLoading<M>(`${endpoint}/${id}`, m =>\n        <>\n            <h1>{m.name}</h1>\n            {render(m)}\n        </>\n    );\n}\n\nexport function ModelSidebar<M extends IModel>({ endpoint }: { endpoint: string }) {\n    const { id: active } = useParams();\n\n    return useLoading<IList<M>>(endpoint, ({ objects }) =>\n        <Cell area='list'>\n            <ul className='list'>\n                {objects.map(({ name, id }) =>\n                    <li key={id} className={classes({ active: id.toString() === active })}>\n                        <Link to={`/${endpoint}s/${id}`}>\n                            {name}\n                        </Link>\n                    </li>\n                )}\n            </ul>\n        </Cell>\n    );\n}","import React from 'react';\nimport Cell from './Cell';\nimport { IAlbum, ISong } from '../api/Models';\nimport { useApi } from '../api/Hooks';\nimport { NO_COVER } from './App'\nimport usePlayer from '../api/Audio';\nimport { Cover } from './Shared';\n\nfunction ActiveSong() {\n    const { song } = usePlayer();\n    return song ? <ActiveCover {...song} /> : null;\n}\n\nfunction ActiveCover(song: ISong) {\n    const [album] = useApi<IAlbum>(song.album);\n\n    return (\n            <Cover\n                src={album?.cover_url}\n                alt='Active Song Cover'\n            />\n    )\n}\n\nexport default ActiveSong;","import React from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Loading, useApi, useLoading } from '../api/Hooks';\nimport { IAlbum, IArtist, IList, ISong } from '../api/Models';\nimport Cell from './Cell';\nimport { Cover, ModelView } from './Shared';\n\nfunction Artists() {\n    return <ModelView endpoint='artist' render={(a: IArtist) => <Artist {...a} />} />;\n}\n\nfunction Artist({ albums }: IArtist) {\n    return (\n        <>\n            <Cell area='albums'>\n                {albums.length > 0\n                    ? albums.map(a => <Album key={a} url={a} />)\n                    : <p className='empty-info'>No albums yet</p>\n                }\n            </Cell>\n        </>\n    );\n}\n\nfunction Album({ url }: { url: string }) {\n    return useLoading<IAlbum>(url, ({ cover_url, name, release, songs }) => (\n        <div>\n            <h5>{name} - (Genre {release})</h5>\n            <Cover\n                src={cover_url}\n                alt='Cover'\n            />\n            <table>\n                <tbody>\n                    {(songs.length > 0)\n                        ? songs.map(t => <SongRow key={t} url={t} />)\n                        : <tr><td className='empty-info'>No songs yet</td></tr>\n                    }\n                </tbody>\n            </table>\n        </div>\n    ));\n}\n\nfunction SongRow({ url }: { url: string }) {\n    const [song] = useApi<ISong>(url);\n\n    return (\n        <tr>\n            {song\n                ? <>\n                    <td>{song.name}</td>\n                    <td>{song.length}</td>\n                </>\n                : <td rowSpan={2}><Loading /></td>\n            }\n        </tr>\n    );\n}\n\nexport default Artists;","import { faCompactDisc, faList, faMusic, faUser } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon as Icon } from '@fortawesome/react-fontawesome';\nimport classes from 'classnames';\nimport React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nfunction Nav() {\n    const path = useLocation().pathname;\n\n    const links = [\n        { href: '/playlists', text: 'Playlists', icon: faList },\n        { href: '/albums', text: 'Albums', icon: faCompactDisc },\n        { href: '/artists', text: 'Artists', icon: faUser },\n        { href: '/songs', text: 'Songs', icon: faMusic },\n        {href: '/login', text: 'Login', icon: faUser}\n    ]\n\n    return (\n        <nav>\n            <ul>\n                {links.map(({ text, href, icon }) =>\n                    <li key={href} className={classes({ active: path === href })}>\n                        <Link to={href}>\n                            <span>{text}</span>\n                            <Icon {...{ icon }} />\n                        </Link>\n                    </li>\n                )}\n            </ul>\n        </nav>\n    );\n}\n\nexport default Nav;\n","import React, { useState, MouseEvent } from 'react';\nimport Cell from './Cell';\nimport { FontAwesomeIcon as Icon } from '@fortawesome/react-fontawesome';\nimport { IconDefinition } from '@fortawesome/fontawesome-common-types';\nimport { faPlay, faStepForward, faStepBackward, faRandom, faVolumeDown, faVolumeUp, faVolumeMute, faRedoAlt, faPause } from '@fortawesome/free-solid-svg-icons'\nimport { IArtist, ISong } from '../api/Models';\nimport { useApi } from '../api/Hooks';\nimport usePlayer, { useVolume } from '../api/Audio';\n\nfunction IconButton(props: { icon: IconDefinition, area?: string, onClick?: () => unknown }) {\n    const { area, icon, ...rest } = props;\n    return (\n        <Cell className='icon-button' area={area ?? ''} {...rest}>\n            <Icon {...{ icon }} />\n        </Cell >\n    )\n}\n\nfunction Player() {\n    const { song, position, play, pause, playing } = usePlayer();\n\n    return (\n        <Cell area='player'>\n            {song && <SongInfo {...song} {...{ position }} />}\n\n            <IconButton icon={faStepBackward} area='previous' />\n            <IconButton icon={faStepForward} area='next' />\n            <IconButton onClick={playing() ? pause : () => play()} icon={playing() ? faPause : faPlay} area='play' />\n            <IconButton icon={faRandom} area='shuffle' />\n            <IconButton icon={faRedoAlt} area='repeat' />\n\n            <Volume />\n        </Cell>\n    );\n}\n\nfunction timestamp(time: number) {\n    const minutes = Math.floor(time / 60);\n    const seconds = time - minutes * 60;\n    return `${minutes}:${seconds.toFixed(0).padStart(2, '0')}`;\n}\n\nfunction SongInfo(song: ISong & { position: number }) {\n    const { title, artists, length, position } = song;\n\n    return (\n        <Cell area='info'>\n            <h4>{title}</h4>\n            <p>{artists?.map(a => <Artist key={a} url={a} />)}</p>\n            <div className='song-progress'>\n                <span>{timestamp(position)}</span>\n                <span>-{timestamp(length - position)}</span>\n                <div style={{ width: `${position / length * 100}%` }} />\n            </div>\n        </Cell>\n    );\n}\n\nfunction Artist({ url }: { url: string }) {\n    const [a] = useApi<IArtist>(url);\n    return a ? <span>{a.name}</span> : null;\n}\n\nfunction Volume() {\n    const { volume, setVolume, toggleVolume } = useVolume();\n\n    const icon = volume === 0\n        ? faVolumeMute\n        : volume < 50\n            ? faVolumeDown\n            : faVolumeUp\n\n    const adjust = (e: MouseEvent<HTMLDivElement>) => {\n        const w = e.currentTarget.offsetWidth;\n        const l = e.currentTarget.getBoundingClientRect().left;\n        const x = e.clientX - l;\n        const v = Math.round(x / w * 100)\n        setVolume(v);\n    }\n\n    return (\n        <Cell area='volume'>\n            <IconButton {...{ icon }} onClick={toggleVolume} />\n            <div className='bar' onClick={adjust} onMouseMove={e => {\n                if (e.buttons > 0) adjust(e);\n            }}>\n                <div style={{ width: `${volume}%` }} />\n            </div>\n        </Cell>\n    );\n}\n\nexport default Player;","import classes from 'classnames';\nimport React from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { useLoading } from '../api/Hooks';\nimport { IList, IPlaylist } from '../api/Models';\nimport Cell from './Cell';\n\nfunction Playlist() {\n    const { id: active } = useParams();\n\n    return useLoading<IList<IPlaylist>>('playlist', ({ objects }) =>\n        <Cell area='playlists'>\n            {(objects.length > 0)\n                ? <ul className='list'>\n                    {objects.map(({ id, name }) =>\n                        <li key={id} className={classes({ active: id.toString() === active })}>\n                            <Link to={`/playlists/${id}`}>{name}</Link>\n                        </li>\n                    )}''\n                </ul>\n                : <p className='empty-info'>No playlists yet</p>\n            }\n        </Cell>\n    );\n}\n\nexport default Playlist;\n\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useApi, useLoading } from '../api/Hooks';\nimport { IAlbum, IArtist, ISong } from '../api/Models';\nimport { SongButton } from '../api/Audio';\n\nfunction Songs({ songs }: { songs: (ISong | string)[] }) {\n    if ((songs?.length ?? 0) === 0) return <p className='empty-info'>No songs yet</p>\n    return (\n        <table className='songlist'>\n            <thead>\n                <tr>\n                    <th></th>\n                    <th>Title</th>\n                    <th>Artists</th>\n                    <th>Album</th>\n                    <th>Length</th>\n                </tr>\n            </thead>\n            <tbody>\n                {songs.map(song =>\n                    <SongRow key={typeof song === 'string' ? song : song.id} {...{ song: song }} />\n                )}\n            </tbody>\n        </table>\n    )\n}\n\nfunction SongRow({ song }: { song: ISong | string }) {\n    if (typeof song === 'string') return <LoadingSongRow url={song} />\n\n    const { album, artists, title, length } = song;\n    return (\n        <tr>\n            <td><SongButton {...{ song }} /></td>\n            <td>{title}</td>\n            <td>{artists.map(a =>\n                <Artist key={a} url={a} />\n            )}</td>\n            <td><Album url={album} /></td>\n            <td>{length}</td>\n        </tr>\n    );\n}\n\nfunction LoadingSongRow({ url }: { url: string }) {\n    return useLoading<ISong>(url, song => <SongRow {...{ song }} />);\n}\n\nfunction Artist({ url }: { url: string }) {\n    const [a] = useApi<IArtist>(url);\n    return a ? <Link className='seperate-comma' to={`/artists/${a.id}`}>{a.name}</Link> : null;\n}\n\nfunction Album({ url }: { url: string }) {\n    const [a] = useApi<IAlbum>(url);\n    return a ? <Link className='seperate-comma' to={`/albums/${a.id}`}>{a.name}</Link> : null;\n}\n\nexport default Songs;","import React from 'react';\nimport { IPlaylist } from '../api/Models';\nimport { ModelView } from './Shared';\nimport SongList from './SongList';\n\nfunction Active({ songs , ...rest }: IPlaylist) {\n    return <SongList {...{ songs: songs }} />\n}\n\nfunction Playlists() {\n    return <ModelView endpoint='playlist' render={(p: IPlaylist) => <Active {...p} />} />\n}\n\nexport default Playlists;","import React from 'react';\nimport { IAlbum, IArtist } from '../api/Models';\nimport { ModelView, Cover } from './Shared';\nimport SongList from './SongList';\nimport Cell from './Cell';\nimport { useLoading } from '../api/Hooks';\nimport { Link } from 'react-router-dom';\n\nfunction Active({ name, artists, songs, cover_url }: IAlbum) {\n    return (\n        <>\n            <Cover src={cover_url} alt={name} />\n            <Cell area='artists'>\n                {artists.map(a => <Artist key={a} url={a} />)}\n            </Cell>\n            <SongList {...{ songs }} />\n        </>\n    )\n}\n\nfunction Artist({ url }: { url: string }) {\n    return useLoading<IArtist>(url, ({ name, id }) =>\n        <Link to={`/artists/${id}`}>{name}</Link>\n    );\n}\n\nfunction Albums() {\n    return <ModelView endpoint='album' render={(a: IAlbum) => <Active {...a} />} />\n}\n\nexport default Albums;","import React from 'react';\nimport { useLoading } from '../api/Hooks';\nimport { IList, ISong } from '../api/Models';\nimport SongList from './SongList';\n\nfunction Songs() {\n    return useLoading<IList<ISong>>('song', ({ objects }) =>\n        <SongList songs={objects} />\n    )\n}\n\nexport default Songs;","import React, { useContext } from 'react';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\n\nexport interface DialogProps {\n    text: string;\n    buttons: {\n        text: string;\n        className?: string;\n        click?: () => unknown\n    }[];\n}\n\nfunction Dialog({ dialog }: { dialog: DialogProps | null }) {\n    const { close } = useDialog();\n\n    return (\n        <TransitionGroup>\n            {dialog &&\n                <CSSTransition key='dialog' timeout={200}>\n                    <div className='dialog'>\n                        <p>{dialog.text}</p>\n                        <ul>\n                            {dialog.buttons.map(({ text, className, click }, i) =>\n                                <button key={i} onClick={() => {\n                                    if (click) click();\n                                    close();\n                                }} {...{ className }}>\n                                    {text}\n                                </button>\n                            )}\n                        </ul>\n                    </div>\n                </CSSTransition>\n            }\n        </TransitionGroup>\n    )\n}\n\nconst DialogContext = React.createContext<[\n    DialogProps | null,\n    (d: DialogProps | null) => unknown\n]>([null, () => { }]);\n\nexport function useDialog() {\n    const [, open] = useContext(DialogContext);\n    const close = () => open(null);\n    return { open, close };\n}\n\nexport const Provider = DialogContext.Provider;\n\nexport default Dialog;","import Api from './Api';\nimport { IList, IModel, IArtist, IAlbum } from './Models';\nimport { Dispatch, SetStateAction } from 'react';\n\nconst songNames = [\n    \"Daunting Moons\",\n    \"The Inside-Out Matter\",\n    \"No One Works At Anger\",\n    \"It Uses They\",\n    \"Pawns At the Spring\",\n    \"The Bowl Find\",\n    \"Obstructing History\",\n    \"Sing Doors\",\n    \"Feverish Thorns\",\n    \"Listen\",\n    \"Thoughts\",\n    \"From The Phantom Penguins\",\n    \"Rule Dos On a Prisoner\",\n    \"Visions In Cadenza\",\n    \"The Ambitious Sweet Child\",\n    \"The Love of Journal\",\n    \"The Magic's Act\",\n    \"Mercy Buy School\",\n    \"Gamble Broadcasting\",\n    \"On They Savior\",\n    \"Dreaming Universes\",\n    \"Missing\",\n    \"Bound Cigars\",\n    \"The Smooth Stream\",\n    \"I Sends Through Expression\",\n    \"No One Finishs Everybody\",\n    \"Something Without the Swords\",\n    \"The Harmony Imagine\",\n    \"Typing Activity\",\n    \"Try Right Now\",\n    \"Bare Machinations\",\n    \"Have\",\n    \"Moment\",\n    \"Of The Venturesome Bond\",\n    \"Photography Cans From a Building\",\n    \"Power From Serenade\",\n    \"The Cool Yearning\",\n    \"The Places of Sweet Child\",\n    \"The Souls's Children\",\n    \"Earaches Listen Crafter\",\n    \"Healing Kneeling\",\n    \"From He Person\",\n    \"Drooling Lines\",\n    \"Undoubted\",\n    \"Bad Outlaws\",\n    \"The Which Island\",\n    \"It Stands Under Expectations\",\n    \"I Puts Its\",\n    \"Date Under the Forever\",\n    \"The Death Give\",\n    \"Slaughtering Matter\",\n    \"Lose War\",\n    \"Solitary Body\",\n    \"Drink\",\n    \"Touch\",\n    \"Like The Same Fair\",\n    \"Building Feels Under a Rose\",\n    \"Flames Of Official\",\n    \"The Abandoned Disk\",\n    \"The Height of Silk\",\n    \"The Anything's Terror\",\n    \"Hope Understand Muse\",\n    \"Village Sailing\",\n    \"Through We Woman\",\n    \"Pleading Names\",\n    \"Hungry\"\n];\n\nconst artistNames = [\n    'Talking Heads',\n    'Carl Perkins',\n    'Curtis Mayfield',\n    'R.E.M.',\n    'Diana Ross and the Supremes',\n    'Lynyrd Skynyrd',\n    'Nine Inch Nails',\n    'Booker T. and the MGs',\n    'Guns n’ Roses',\n    'Tom Petty',\n    'Carlos Santana',\n    'The Yardbirds',\n    'Jay-Z',\n    'Gram Parsons',\n    'Tupac Shakur',\n    'Black Sabbath',\n    'James Taylor',\n    'Eminem',\n    'Creedence Clearwater Revival',\n    'The Drifters',\n    'Elvis Costello',\n    'The Four Tops',\n    'The Stooges',\n    'Beastie Boys',\n    'The Shirelles',\n    'Eagles',\n    'Hank Williams',\n    'Radiohead',\n    'AC/DC',\n    'Frank Zappa',\n    'The Police',\n    'Jackie Wilson',\n    'The Temptations',\n    'Cream',\n    'Al Green',\n    'The Kinks',\n    'Phil Spector',\n    'Tina Turner',\n    'Joni Mitchell',\n    'Metallica',\n    'The Sex Pistols',\n    'Aerosmith',\n    'Parliament and Funkadelic',\n    'Grateful Dead',\n    'Dr. Dre',\n    'Eric Clapton',\n    'Howlin’ Wolf',\n    'The Allman Brothers Band',\n    'Queen',\n    'Pink Floyd'\n]\n\nfunction range<T>(array: T[], i: number) {\n    return array.sort((a, b) => Math.random() - 0.5).slice(0, Math.min(array.length, i));\n}\n\nfunction randomDate() {\n    return `${1960 + Math.floor(Math.random() * 60)}`;\n}\n\nexport interface ISonger {\n    setTotal: Dispatch<SetStateAction<number>>,\n    setProgress: Dispatch<SetStateAction<number>>,\n    setMessage?: Dispatch<SetStateAction<string | null>>,\n}\n\nclass Seeder {\n\n    tags(count: number) {\n        return []\n    }\n\n    artists(count: number) {\n        return range(artistNames, count).map(name => ({ name, type: 'P' }));\n    }\n\n    albums(artists: IArtist[]) {\n        const artistIds = artists.map(a => a.resource_uri);\n        return (count: number) => range(songNames, count).map(name => ({\n            name,\n            artists: range(artistIds, 2),\n            release: randomDate(),\n        }));\n    }\n\n    songs(count: number) {\n        return range(songNames, count).map(title => ({\n            title,\n            length: Math.floor(Math.random() * 100 + 100),\n        }));\n    }\n\n    playlists(count: number) {\n        return new Array(count).fill(null).map((_, i) => ({\n            name: 'Playlist ' + i,\n        }));\n    }\n\n    private wait(millis: number) {\n        return new Promise(res => setTimeout(res, millis));\n    }\n\n    private async seedModels<M extends IModel>(endpoint: string, count: number, generator: (i: number) => unknown[], songer?: ISonger) {\n\n        songer?.setMessage?.call(null, `Fetching ${endpoint}s`)\n        songer?.setProgress(0);\n\n        const old = await Api.fetch<IList<IModel>>(endpoint);\n        songer?.setTotal(old.objects.length + count);\n\n        songer?.setMessage?.call(null, `Deleting ${endpoint}s`)\n        await Promise.all(old.objects.map(m =>\n            Api.delete(m.resource_uri, {}, false)\n                .catch(e => console.error(e))\n                .then(() => songer?.setProgress(i => i + 1))\n        ));\n\n        songer?.setMessage?.call(null, `Seeding ${endpoint}s`)\n        await Promise.all(generator(count).map(m =>\n            Api.post(endpoint, m, false)\n                .catch(e => console.error(e))\n                .then(() => songer?.setProgress(i => i + 1))\n        ));\n\n        const { objects } = await Api.fetch<IList<M>>(endpoint);\n        return objects;\n    }\n\n    async seed(songer?: ISonger) {\n\n        const artists = await this.seedModels<IArtist>('artist', 20, this.artists, songer);\n        const albums = await this.seedModels<IAlbum>('album', 20, this.albums(artists), songer);\n\n        songer?.setMessage?.call(null, 'Done');\n        this.wait(200);\n        songer?.setTotal(0);\n        songer?.setMessage?.call(null, null);\n\n        Api.update();\n\n    }\n\n}\n\nconst SEEDER = new Seeder();\n\nexport default SEEDER;","import React, { useState } from 'react';\nimport SEEDER from \"../api/Seeder\";\nimport classes from 'classnames';\nimport { useApi, Loading } from '../api/Hooks';\nimport { IList } from '../api/Models';\n\ninterface IEndpoints {\n    [key: string]: {\n        list_endpoint: string,\n        schema: string\n    }\n}\n\nfunction Endpoint({ endpoint }: { endpoint: string }) {\n    const [models] = useApi<IList<unknown>>(endpoint);\n    const count = models?.objects.length;\n\n    return (\n        <div>\n            <p>{endpoint}</p>\n            <p>\n                {models\n                    ? `${count} model${count === 1 ? '' : 's'}`\n                    : <Loading />\n                }\n            </p>\n        </div>\n    )\n}\n\nfunction Seeder() {\n    const [progress, setProgress] = useState(0);\n    const [total, setTotal] = useState(0);\n    const [message, setMessage] = useState<string | null>(null);\n    const loading = (total > 0);\n\n    const [endpoints] = useApi<IEndpoints>('');\n\n    const seed = () => SEEDER.seed({ setProgress, setTotal, setMessage }).catch(e => console.error(e))\n\n    return (\n        <>\n            <div className='endpoints'>\n                {endpoints && Object.keys(endpoints).filter(e => e !== 'apikey').map(e =>\n                    <Endpoint key={e} endpoint={e} />\n                )}\n            </div>\n\n            <button className={classes({ disabled: loading })} onClick={seed}>\n                <p>{loading ? 'Seeding...' : 'Seed!'}</p>\n            </button>\n\n            {loading &&\n                <>\n                    <div className='progress'>\n                        <div style={{ width: `${progress / total * 100}%` }} />\n                        <p>{progress} / {total}</p>\n                    </div>\n                    <p>{message}</p>\n                </>\n            }\n        </>\n    );\n}\n\nexport default Seeder;","import { IApi } from \"./Api\";\nimport { IModel, ISong, IArtist, IAlbum, ITag, IPlaylist } from \"./Models\";\nimport { ParsedUrlQueryInput } from \"querystring\";\nimport Seeder from './Seeder';\n\ninterface FakeMethods<O> {\n    get: () => O,\n    delete?: (id: number) => unknown,\n    put?: (id: number, o: O) => unknown,\n    post?: (o: any) => unknown\n}\n\nclass FakeApi implements IApi {\n\n    private fakes = new Map<string, FakeMethods<any>>();\n\n    public fakeModels<O extends IModel>(endpoint: string, models: O[]) {\n        this.fake<O[]>(endpoint, {\n            get: () => models,\n            post: m => models.push(m)\n        });\n\n        models.forEach(m => this.fake(`${endpoint}/${m.id}`, {\n            get: () => m,\n            delete: id => {\n                models = models.filter(m => m.id !== id);\n            },\n            put: (id, m) => {\n                const o = models.find(m => m.id === id);\n                if (!o) return;\n                const n = { ...o, m } as O;\n                models[models.indexOf(o)] = n;\n            }\n        }));\n    }\n\n    public fake<O = IModel>(endpoint: string, data: FakeMethods<O> | (() => {})) {\n        if (typeof data === 'function') this.fake(endpoint, { get: data });\n        else this.fakes.set(endpoint, data);\n    }\n\n    public async fakeFor(url: string) {\n        return new Promise<FakeMethods<unknown>>((res, rej) => window.setTimeout(() => {\n\n            const endpoint = url.match(/^\\/?([a-zA-Z0-9_/-]+?)\\??\\/?\\??$/);\n            if (endpoint) {\n                const fake = this.fakes.get(endpoint[1]);\n\n                if (fake) res(fake);\n                rej(new Error('Not Found'));\n\n            } else rej(new Error('Invalid Endpoint'));\n\n        }, 1000 * (Math.random() + 1)))\n    }\n\n    public subscribe<O>(url: string, params?: ParsedUrlQueryInput) {\n\n        return {\n            then: (cb: (result: O | undefined, error?: Error) => unknown) => {\n\n                this.fakeFor(url)\n                    .then(f => f.get())\n                    .then(r => cb(r as O))\n                    .catch(e => cb(undefined, e));\n\n                return () => { };\n            }\n        }\n\n    }\n\n    public async post<O = string>(url: string, args: any) {\n        const fake = await this.fakeFor(url);\n        if (fake?.post) fake?.post(args);\n        return \"Posted\" as any as O;\n    }\n\n    public async delete<O = string>(url: string, args: any) {\n        const fake = await this.fakeFor(url);\n        if (fake?.delete) fake?.delete(args.id);\n        return \"Deleted\" as any as O;\n    }\n\n    public async put<O = string>(url: string, args: any) {\n        const fake = await this.fakeFor(url);\n        if (fake?.put) fake?.put(args.id, args);\n        return \"Updated\" as any as O;\n    }\n\n}\n\nconst API = new FakeApi();\n\n//API.fakeModels<ISong>('song', Seeder.songs(20));\n//API.fakeModels<IArtist>('artist', Seeder.artists(20));\n//API.fakeModels<IAlbum>('album', Seeder.albums(20));\n//API.fakeModels<ITag>('tag', Seeder.tags(20));\n//API.fakeModels<IPlaylist>('playlist', Seeder.playlists(6));\n\n//API.fake<IActiveSong>('active-song', () => {\n//    const song = Seeder.songs(1)[0];\n//    return { ...song, position: Math.floor(Math.random() * song.length) }\n//});\n\n\nexport default API;","import React, { useState } from 'react';\nimport API from '../api/FakeApi';\nimport { Link } from 'react-router-dom';\n\n\nfunction Login() {\n\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState(null);\n\n    return (\n        <div className=\"userlogin\">\n            <form name=\"LoginForm\">\n                {error && <p>{error}</p>}\n                <label>\n                    <input\n                        type=\"text\"\n                        placeholder=\"Benutzername\"\n                        onChange={e => setUsername(e.target.value)}\n                        value={username}\n                        required />\n                </label>\n                <label>\n                    <input\n                        type=\"password\"\n                        placeholder=\"Passwort\"\n                        onChange={e => setPassword(e.target.value)}\n                        value={password}\n                        required />\n                </label>\n                <br />\n                <label>\n                    <button\n                        type=\"submit\"\n                        onClick={() => API.post(\"api/v1/apikey/\", { name: username, password: password })}>Login</button>\n                </label>\n                <label>\n                    <Link to={`/registration/`} >Noch nicht eingeloggt? Dann hier registrieren.</Link>\n\n                </label>\n            </form>\n\n        </div>\n\n\n    );\n}\nexport default Login;\n\n","import React, { useEffect, useState, useMemo } from 'react';\nimport { BrowserRouter as Router, Redirect, Route, Switch, useLocation } from 'react-router-dom';\nimport '../style/general.scss';\nimport ActiveSong from './ActiveSong';\nimport Artists from './Artists';\nimport Cell from './Cell';\nimport Nav from './NavBar';\nimport Player from './Player';\nimport PlaylistsBar from './PlaylistsBar';\nimport { useApi } from '../api/Hooks';\nimport { IList, ISong } from '../api/Models';\nimport Playlists from './Playlists';\nimport classes from 'classnames';\nimport Albums from './Albums';\nimport Songs from './Songs';\nimport Dialog, { Provider as DialogProvider, DialogProps } from './Dialog';\nimport Seeder from './Seeder';\nimport Login from './Login';\nimport { useCreateAudio, Provider as AudioProvider } from '../api/Audio';\n\nexport const NO_COVER = require('../img/example-cover.jpg');\n\nfunction App() {\n\n\tconst dialog = useState<DialogProps | null>(null);\n\tconst audio = useCreateAudio();\n\n\tconst pages: IPage[] = [\n\t\t{ path: '/songs', component: Songs },\n\t\t{ path: '/playlists/:id?', component: Playlists },\n\t\t{ path: '/artists/:id?', component: Artists },\n\t\t{ path: '/albums/:id?', component: Albums },\n\t\t{ path: '/songs', component: Songs },\n\t\t{ path: '/seed', component: Seeder },\n\t\t{ path: '/login', component: Login },\n\t];\n\n\treturn (\n\t\t<DialogProvider value={dialog}>\n\t\t\t<AudioProvider value={audio}>\n\n\t\t\t\t<Router>\n\t\t\t\t\t<Nav />\n\t\t\t\t\t<Player />\n\t\t\t\t\t<ActiveSong />\n\t\t\t\t\t<PlaylistsBar />\n\n\t\t\t\t\t<Dialog dialog={dialog[0]} />\n\n\t\t\t\t\t<Switch>\n\n\t\t\t\t\t\t{pages.map(page =>\n\t\t\t\t\t\t\t<Route key={page.path} path={page.path}>\n\t\t\t\t\t\t\t\t<Page {...page} />\n\t\t\t\t\t\t\t</Route >\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<Route exact path='/'>\n\t\t\t\t\t\t\t<Redirect to='/playlists' />\n\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t</Switch>\n\t\t\t\t</Router>\n\n\t\t\t</AudioProvider>\n\t\t</DialogProvider>\n\t);\n}\n\nexport interface IPage {\n\tpath: string;\n\tcomponent: () => JSX.Element | null;\n\tkey?: string;\n\ttext?: string;\n}\n\nfunction Page(page: IPage) {\n\n\tconst path = useLocation().pathname.slice(1) + '/';\n\tconst key = page.key ?? path.slice(0, path.indexOf('/'));\n\n\tuseEffect(() => {\n\t\tdocument.title = 'OSS - ' + key.charAt(0).toUpperCase() + key.slice(1).toLowerCase();\n\t}, [key]);\n\n\treturn (\n\t\t<Cell area='page' id={key}>\n\t\t\t<page.component />\n\t\t</Cell>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n//import 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}