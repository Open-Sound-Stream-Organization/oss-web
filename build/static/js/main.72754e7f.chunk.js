(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{36:function(e,t,n){"use strict";(function(e){var a=n(1),r=n(0),c=n.n(r),o=n(5);t.a=function(){var t=Object(r.useState)(""),n=Object(a.a)(t,2),l=n[0],u=n[1],i=Object(r.useState)(""),s=Object(a.a)(i,2),m=s[0],f=s[1],d=Object(r.useState)(null),v=Object(a.a)(d,2),p=v[0],h=v[1];return c.a.createElement("div",{className:"user-login"},c.a.createElement("form",{onSubmit:function(t){var n;t.preventDefault(),o.a.login((n="".concat(l,":").concat(m),new e(n).toString("base64"))).catch((function(e){return h(e.message)}))}},c.a.createElement("h1",null,"Login"),p&&c.a.createElement("p",{className:"error"},p),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"username"},"Username"),c.a.createElement("input",{id:"username",type:"text",placeholder:"Username",onChange:function(e){return u(e.target.value)},value:l,required:!0})),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{id:"password",type:"password",placeholder:"Password",onChange:function(e){return f(e.target.value)},value:m,required:!0})),c.a.createElement("button",{type:"submit"},"Login"),c.a.createElement("a",{href:"https://oss.anjomro.de/register/"},"Register")))}}).call(this,n(53).Buffer)},38:function(e,t,n){e.exports=n(59)},5:function(e,t,n){"use strict";var a=n(4),r=n.n(a),c=n(12),o=n(24),l=n(25),u=n(26),i=n.n(u),s="".concat("","/api/v1"),m=n(34),f=n.n(m),d=new(function(){function e(){Object(o.a)(this,e),this.observers=new Set}return Object(l.a)(e,[{key:"call",value:function(e){var t=e.url,n=e.params,a=e.callback;this.fetch(t,n).then((function(e){return a(e)})).catch((function(e){return a(void 0,e)}))}},{key:"update",value:function(){var e=this;this.observers.forEach((function(t){return e.call(t)}))}},{key:"subscribe",value:function(e,t){var n=this;return{then:function(a){var r={url:e,params:t,callback:a};return n.observers.add(r),n.call(r),function(){n.observers.delete(r)}}}}},{key:"fetch",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="string"===typeof n?n:i.a.encode(null!==n&&void 0!==n?n:{}),e.abrupt("return",this.method("get","".concat(t,"/?").concat(a)));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getApiKey",value:function(){var e=localStorage.getItem("apikey");return e?JSON.parse(e):null}},{key:"isLoggedIn",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.getApiKey()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",this.fetch("artist").then((function(){return!0})).catch((function(e){return console.log(e),!1})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"audio",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getApiKey()){e.next=3;break}throw new Error("Not logged in");case 3:return e.next=5,fetch("/".concat(t),{headers:{Authorization:n.key}});case 5:if(200===(a=e.sent).status){e.next=8;break}throw new Error(a.statusText);case 8:return e.next=10,a.arrayBuffer();case 10:return c=e.sent,o=new Blob([c],{type:"audio/*"}),e.abrupt("return",URL.createObjectURL(o));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"upload",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c,o,l,u=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=u.length>2&&void 0!==u[2]?u[2]:"post",c=this.getApiKey()){e.next=4;break}throw new Error("Not logged in");case 4:return(o=t).startsWith(s)||(o="".concat(s,"/").concat(o)),o+="/",(l=new FormData).append("audio",n),e.next=11,fetch(o,{method:a.toUpperCase(),headers:{Accept:"application/json",Authorization:c.key},body:l});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"method",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){var c,o,l,u,i=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=!(i.length>3&&void 0!==i[3])||i[3],o=this.getApiKey()){e.next=4;break}throw new Error("Not logged in");case 4:return(l=n).startsWith(s)||(l="".concat(s,"/").concat(l)),"get"!==t&&(l+="/"),e.next=9,fetch(l,{method:t.toUpperCase(),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:o.key},body:a?JSON.stringify(a):void 0});case 9:if(u=e.sent,c&&"get"!==t&&this.update(),200!==u.status){e.next=15;break}return e.abrupt("return",u.json());case 15:throw new Error("Not logged in");case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=!(c.length>2&&void 0!==c[2])||c[2],e.abrupt("return",this.method("post",t,n,a));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=!(c.length>2&&void 0!==c[2])||c[2],e.abrupt("return",this.method("put",t,n,a));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=!(c.length>2&&void 0!==c[2])||c[2],e.abrupt("return",this.method("delete",t,n,a));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getApiKey())){e.next=4;break}return e.next=4,this.delete("apikey/".concat(t.id)).catch((function(e){return console.error(e)}));case 4:localStorage.removeItem("apikey"),window.location.reload();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,o,l,u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(s,"/apikey/"),a=navigator,c=a.platform,o=a.vendor,l=f()(new Date),e.next=5,fetch(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Basic ".concat(t)},body:JSON.stringify({purpose:"".concat(o," ").concat(c,", ").concat(l)})});case 5:if(u=e.sent,this.update(),201===u.status){e.next=9;break}throw new Error("Invalid credentials");case 9:return e.next=11,u.json();case 11:i=e.sent,localStorage.setItem("apikey",JSON.stringify(i)),window.location.reload();case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}());t.a=d},50:function(e,t,n){},57:function(e,t,n){e.exports=n.p+"static/media/test.5aa714da.mp3"},58:function(e,t,n){e.exports=n.p+"static/media/example-cover.b2e600a7.jpg"},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),l=n(1),u=n(7),i=n.n(u),s=n(10),m=n(13),f=n(5),d=n(15),v=n(4),p=n.n(v),h=n(12),b=n(6),g=n(2),E=n(8),O=n(62),j=n(61),y=n(28),k=function(e){var t=e.text,n=e.type,a=e.close,c=function(){switch(n){case"error":return g.a;case"info":return g.l;case"success":return g.b;case"warning":return g.h}}();return r.a.createElement("div",{className:"message ".concat(n),onClick:a},r.a.createElement("span",null,t),r.a.createElement(E.a,{icon:c}))},w=r.a.createContext([[],function(){}]),S=function(){var e=Object(a.useContext)(w),t=Object(l.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){var e=Object(y.setInterval)((function(){if(n.length>0){var e=(new Date).getTime();r((function(t){return t.filter((function(t){var n=t.date;return e-n.getTime()<4e3}))}))}}),1e3);return function(){return clearTimeout(e)}}),[]);return{add:function(e){return r((function(t){return[].concat(Object(b.a)(t.slice(-4)),[Object(d.a)(Object(d.a)({},e),{},{date:new Date})])}))},clear:function(){return r([])},close:function(e){return r((function(t){var n=Object(b.a)(t);return n.splice(e,1),n}))}}},N=w.Provider,x=function(){var e=Object(a.useContext)(w),t=Object(l.a)(e,1)[0],n=S(),c=(n.add,n.close);return r.a.createElement(O.a,{className:"messages"},t.slice(0,4).map((function(e,t){return r.a.createElement(j.a,{key:+e.date,timeout:400},r.a.createElement(k,Object.assign({close:function(){return c(t)}},e)))})))},C=Object(a.createContext)(null),T=C.Provider,M=function(){var e=Object(a.useContext)(C);if(!e)throw new Error("There is no player defined");return e},A=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(l.a)(c,2),u=o[0],i=o[1],s=Object(a.useState)(!0),m=Object(l.a)(s,2),v=m[0],g=m[1],E=Object(a.useState)(0),O=Object(l.a)(E,2),j=O[0],y=O[1],k=Object(a.useState)([]),w=Object(l.a)(k,2),N=w[0],x=w[1],C=Object(a.useMemo)((function(){return Object(b.a)(N).sort((function(){return Math.random()-.5}))}),[N]),T=u?C:N,M=Object(a.useState)(0),A=Object(l.a)(M,2),F=A[0],P=A[1],D=Object(a.useMemo)((function(){var e=new Audio;return e.crossOrigin="anonymous",e}),[]),L=function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],c=n[1],o=S();return{songs:r,add:function(e){c((function(t){return[].concat(Object(b.a)(t),[e])})),o.add({text:"Added ".concat(e.title," to the queue"),type:"success"})},remove:function(e){c((function(t){var n=Object(b.a)(t);return n.splice(e,1),n}))}}}();Object(a.useEffect)((function(){var e=function(){return y(D.currentTime)};return D.addEventListener("timeupdate",e),function(){return D.removeEventListener("timeupdate",e)}}),[D]);var B=function(){var e=Object(h.a)(p.a.mark((function e(t,n){var a,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Array.isArray(t)?t:n,c=Array.isArray(t)?void 0:t,o=null!==c&&void 0!==c?c:a?a[0]:void 0,a&&o&&P(a.indexOf(o)),x(Object(b.a)(null!==a&&void 0!==a?a:[])),!(null===o||void 0===o?void 0:o.audio)){e.next=10;break}return e.next=8,f.a.audio(o.audio).then((function(e){r(o),D.src=e,D.currentTime=0,D.play()})).catch((function(e){r(void 0),console.error(e)}));case 8:e.next=12;break;case 10:return e.next=12,null===D||void 0===D?void 0:D.play();case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){if(null===L||void 0===L?void 0:L.songs[0])return function(){B(L.songs[0]),L.remove(0)};var e=F+1;return T.length>0&&(e<T.length||v)?function(){B(T[e%T.length])}:void 0}();return{song:n?Object(d.a)(Object(d.a)({},n),{},{length:D.duration}):void 0,play:B,pause:function(){null===D||void 0===D||D.pause()},next:I,previous:void 0,shuffle:u,repeat:v,setShuffle:i,setRepeat:g,playing:function(){return!!D&&!D.paused},position:j,queue:L,audio:D,songs:T.slice(F+1,F+11)}},F=function(e){var t=e.song,n=e.songs,a=M(),c=a.play,o=a.pause,l=a.playing,u=a.song,s=t.id===(null===u||void 0===u?void 0:u.id),m=!t.audio;return r.a.createElement("button",Object.assign({className:i()("song-button",{disabled:m})},{onClick:function(){s?l()?o():c():c(t,n)}}),r.a.createElement(E.a,{icon:s&&l()?g.p:g.q}))},P=M,D=n(26),L=n.n(D);function B(e,t){var n=Object(a.useState)(),r=Object(l.a)(n,2),c=r[0],o=r[1],u=Object(a.useState)(!0),i=Object(l.a)(u,2),s=i[0],m=i[1],d=Object(a.useState)(),v=Object(l.a)(d,2),p=v[0],h=v[1],b=L.a.encode(t);return Object(a.useEffect)((function(){return m(!0),o(void 0),f.a.subscribe(e,b).then((function(e,t){o(e),h(null===t||void 0===t?void 0:t.message),m(!1)}))}),[b,e]),[c,s,p]}function I(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!0),u=Object(l.a)(o,2),i=u[0],s=u[1],m=Object(a.useState)([]),d=Object(l.a)(m,2),v=d[0],p=d[1],h=Object(a.useMemo)((function(){return r.filter((function(e){return!!e}))}),[r]);return Object(a.useEffect)((function(){h.length===e.length&&s(!1)}),[h,e]),Object(a.useEffect)((function(){s(!0),c([]);var t=e.map((function(e,t){return f.a.subscribe(e).then((function(e,n){n?p((function(e){var a=Object(b.a)(e);return a[t]=n.message,a})):e&&c((function(n){var a=Object(b.a)(n);return a[t]=e,a}))}))}));return function(){return t.forEach((function(e){return e()}))}}),[e]),[h,i,v]}function U(e,t){var n=B(e,t),r=Object(l.a)(n,3),c=r[0],o=r[1],u=r[2];return[Object(a.useMemo)((function(){var e;return(null!==(e=null===c||void 0===c?void 0:c.objects)&&void 0!==e?e:[]).sort((function(e,t){return e.id-t.id}))}),[c]),o,u]}function R(e,t,n){var a="function"===typeof t?t:n,c=U(e,"object"===typeof t?t:void 0),o=Object(l.a)(c,3),u=o[0],i=o[1],s=o[2];return i?r.a.createElement(K,null):u?a?a(u):null:r.a.createElement("span",{className:"empty-info"},s||"Not found")}var K=function(){return r.a.createElement(E.a,{className:"loading inline",icon:g.v})};function W(e,t,n){var a="function"===typeof t?t:n,c=B(e,"object"===typeof t?t:void 0),o=Object(l.a)(c,3),u=o[0],i=o[1],s=o[2];return i?r.a.createElement(K,null):u?a?a(u):null:r.a.createElement("span",{className:"empty-info"},s||"Not found")}n(50);var J=n(18),_=function(e){var t=e.children,n=e.className,a=e.area,c=e.style,o=Object(J.a)(e,["children","className","area","style"]);return r.a.createElement("div",Object.assign({className:"".concat(null!==n&&void 0!==n?n:""," ").concat(a),style:Object(d.a)({gridArea:a,position:"relative"},c)},o),t)},q=r.a.createContext([null,function(){}]),H=function(){var e=Object(a.useContext)(q),t=Object(l.a)(e,2)[1];return{open:t,close:function(){return t(null)}}},G=q.Provider,V=function(){var e=Object(a.useContext)(q),t=Object(l.a)(e,1)[0],n=H().close,c=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=function(e){27===e.keyCode&&n()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}})),r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{onClick:n,className:"curtain"}),t&&r.a.createElement("div",Object.assign({className:"dialog enter-done"},{ref:c}),t))},z=[g.k,g.o,g.j,g.f,g.t,g.d],Q=function(e){var t=e.src,n=e.alt,c=Object(J.a)(e,["src","alt"]),o=Object(a.useState)(!1),u=Object(l.a)(o,2),i=u[0],s=u[1],m=Object(a.useMemo)((function(){return z[Math.floor(Math.random()*z.length)]}),[]);return r.a.createElement(_,{area:"cover",style:Object(d.a)({},c)},r.a.createElement("img",Object.assign({onLoad:function(){return s(!0)},onError:function(){return s(!1)},draggable:!1},{alt:n,src:t})),!i&&r.a.createElement(E.a,{icon:m}))};function Y(e){var t=e.endpoint,n=e.create,a=Object(s.h)().id;return r.a.createElement(r.a.Fragment,null,r.a.createElement($,{endpoint:t,create:n}),r.a.createElement(_,{area:"active"},a?r.a.createElement(Z,Object.assign({id:a},e)):r.a.createElement("h1",null,"Select a",t.match(/^[aeiou]/i)?"n":""," ",t)))}function Z(e){var t=e.id,n=e.endpoint,a=e.render;return W("".concat(n,"/").concat(t),(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,e.name),a(e))}))}var X=function(e){var t=e.endpoint,n=Object(a.useState)(""),c=Object(l.a)(n,2),o=c[0],u=c[1],s=H().close,m=o.length<1;return r.a.createElement("form",{className:"create",onSubmit:function(e){e.preventDefault(),s(),f.a.post(t,{name:o}).catch((function(e){return console.error(e)}))}},r.a.createElement("input",{className:"big",value:o,onChange:function(e){return u(e.target.value)},type:"text",placeholder:"Name"}),r.a.createElement("button",{className:i()("primary",{disabled:m}),type:"submit"},"Create"))};function $(e){var t=e.endpoint,n=Object(J.a)(e,["endpoint"]),a=Object(s.h)().id,c=H().open,o=n.create?function(){return"function"===typeof n.create?n.create():r.a.createElement(X,{endpoint:t})}:null;return R(t,(function(e){return r.a.createElement(_,{area:"list"},o&&r.a.createElement("button",{onClick:function(){return c(o())}},r.a.createElement(E.a,{icon:g.r})),r.a.createElement("ul",{className:"list"},e.length>0?e.map((function(e){var n=e.name,c=e.id;return r.a.createElement(m.b,{key:c,to:"/".concat(t,"s/").concat(c)},r.a.createElement("li",{className:i()({active:c.toString()===a})},n))})):r.a.createElement("li",{className:"empty-info"},"No ",t,"s yet")))}))}var ee=function(e){var t=B(e.album),n=Object(l.a)(t,1)[0];return r.a.createElement(Q,{src:null===n||void 0===n?void 0:n.cover_url,alt:"Active Song Cover"})},te=function(){var e=P().song;return e?r.a.createElement(ee,e):r.a.createElement(Q,{alt:"No song playing"})},ne=r.a.memo((function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),u=Object(l.a)(o,2),s=u[0],m=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m((function(e){return[].concat(Object(b.a)(n),Object(b.a)(e))})),c([])}},r.a.createElement("label",{role:"button",className:"file",htmlFor:"file"},r.a.createElement("span",null,"Choose Files"),r.a.createElement(E.a,{icon:g.A})),r.a.createElement("input",{onChange:function(e){var t;return c(Object(b.a)(null!==(t=e.target.files)&&void 0!==t?t:[]))},multiple:!0,id:"file",type:"file",accept:"audio/mp3",hidden:!0}),r.a.createElement("button",{className:i()({disabled:0===n.length}),type:"submit"},"Upload ",n.length?"".concat(n.length," Song"):"")),r.a.createElement("ul",{className:"uploading"},s.map((function(e){return r.a.createElement(ae,{key:e.name,file:e})}))))})),ae=function(e){var t,n=e.file,c=Object(a.useState)(!1),o=Object(l.a)(c,2),u=o[0],s=o[1],m=(t=n).name.substring(0,t.name.lastIndexOf("."));return Object(a.useEffect)((function(){s(!1),f.a.upload("song",n).catch((function(e){return console.error(e)})).then((function(){return s(!0)}))}),[n]),r.a.createElement("li",{className:i()({done:u})},u?r.a.createElement(E.a,{icon:g.b}):r.a.createElement(K,null),r.a.createElement("span",null,m))};function re(e){var t=e.endpoint,n=e.state,c=e.name,o=e.highlight,u=Object(l.a)(n,2),s=u[0],m=u[1],f=Object(a.useState)(!1),d=Object(l.a)(f,2),v=d[0],p=d[1],h=U(t),g=Object(l.a)(h,1)[0],E=Object(a.useMemo)((function(){return o&&g?Object(b.a)(g).sort((function(e,t){var n=[e,t].map(o).map((function(e){return e?-1:1})),a=Object(l.a)(n,2);return a[0]-a[1]})):null!==g&&void 0!==g?g:[]}),[o,g]),O=function(e){if("create"===e)p(!0);else{p(!1);var t=e.length>0?e:null;m(t)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("select",{value:null!==s&&void 0!==s?s:"",id:null!==c&&void 0!==c?c:t,name:null!==c&&void 0!==c?c:t,onChange:function(e){return O(e.target.value)}},E.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:""},"Select an ",t),r.a.createElement("option",{value:"create"},"Create an ",t),E.map((function(e){return r.a.createElement("option",{className:i()({highlight:o&&o(e)}),key:e.id,value:e.resource_uri},e.name)})))),v&&r.a.createElement("input",{type:"text"}))}var ce=function(e){var t=e.endpoint,n=e.state,c=Object(l.a)(n,2),o=c[0],u=c[1],i=Object(a.useState)(o.length>0?o:[null]),s=Object(l.a)(i,2),m=s[0],f=s[1];return Object(a.useEffect)((function(){u(m.filter((function(e){return!!e})))}),[m]),r.a.createElement("div",{className:"multi-select"},m.map((function(e,n){return r.a.createElement(re,Object.assign({name:"".concat(t,"[]"),key:n},{endpoint:t},{state:[e,function(t){var a=Object(b.a)(m),r="function"===typeof t?t(e):t;r||0===n?a[n]=r:a.splice(n,1),f(a)}]}))})),m[m.length-1]&&r.a.createElement("button",{onClick:function(){return f([].concat(Object(b.a)(m),[null]))}},"Add"))},oe=function(e){var t,n,c,o=e.song,u=H().close,i=Object(a.useState)(null!==(t=null===o||void 0===o?void 0:o.title)&&void 0!==t?t:""),s=Object(l.a)(i,2),m=s[0],d=s[1],v=Object(a.useState)(null!==(n=null===o||void 0===o?void 0:o.album)&&void 0!==n?n:null),p=Object(l.a)(v,2),h=p[0],b=p[1],g=Object(a.useState)(null!==(c=null===o||void 0===o?void 0:o.artists)&&void 0!==c?c:[]),E=Object(l.a)(g,2),O=E[0],j=E[1],y=Object(a.useMemo)((function(){return function(e){return O.every((function(t){return e.artists.includes(t)}))}}),[O]),k={artists:O,album:h,title:m};return r.a.createElement("form",{className:"editor",onSubmit:function(e){e.preventDefault(),u(),o&&f.a.put("song/".concat(o.id),k).catch((function(e){return console.error(e)}))}},r.a.createElement(_,{area:"title"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{className:"big",id:"title",type:"text",placeholder:"Title",value:m,onChange:function(e){return d(e.target.value)}})),r.a.createElement(_,{area:"artists"},r.a.createElement("label",null,"Artists"),r.a.createElement(ce,{endpoint:"artist",state:[O,j]})),r.a.createElement(_,{area:"album"},r.a.createElement("label",{htmlFor:"album"},"Album"),r.a.createElement(re,Object.assign({endpoint:"album",state:[h,b]},{highlight:y}))),r.a.createElement("input",{type:"submit",className:"primary",value:"Save"}))},le=ne;function ue(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(a.useState)([]),r=Object(l.a)(n,2),c=r[0],o=r[1],u=Object(a.useState)([]),i=Object(l.a)(u,2),s=i[0],m=i[1],f=Object(a.useState)(),d=Object(l.a)(f,2),v=d[0],p=d[1],h=Object(a.useMemo)((function(){return e.map((function(e){return e.id}))}),[e]);Object(a.useEffect)((function(){var e=function(e){e.ctrlKey&&65===e.keyCode&&(e.preventDefault(),o(Object(b.a)(h)),m(Object(b.a)(h)))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}));var g=function(e){var t="number"===typeof e?e:e.id;return c.includes(t)},E=function(e){var n=h.indexOf(e),a=g(e);return{onMouseDown:function(r){var c=(r.shiftKey||r.ctrlKey)&&t?s:[];a&&r.ctrlKey&&t?c.splice(n,1):c.push(e),r.shiftKey||(p(n),m(c)),o(c)},onMouseUp:function(e){var a=e.shiftKey;t&&a&&void 0!==v&&o((function(e){for(var t=Object(b.a)(e),a=Math.min(v,n),r=Math.max(v,n),c=a;c<=r;c++)t.push(h[c]);return t}))},onMouseMove:function(e){if(e.buttons){var t=Object(b.a)(s);if(void 0!==v)for(var a=Math.min(v,n),r=Math.max(v,n),c=a;c<=r;c++)t.push(h[c]);o(t)}}}};return{selected:function(){return e.filter((function(e){return g(e.id)}))},isSelected:g,events:E}}var ie=function(e){var t=e.songs,n=H().close,a=U("playlist"),c=Object(l.a)(a,1)[0],o=ue(null!==c&&void 0!==c?c:[],!1),u=o.isSelected,s=o.events,m=Object(J.a)(o,["isSelected","events"]).selected(),d=Object(l.a)(m,1)[0];return c?r.a.createElement("div",{className:"add-songs demarg"},r.a.createElement("button",{className:i()("primary",{disabled:!d}),onClick:function(){Promise.all(t.filter((function(e){return u(e.id)})).map((function(e){return f.a.post("songinplaylist",{song:e.resource_uri,playlist:d.resource_uri},!1).catch((function(e){return console.error(e)}))}))).then((function(){return f.a.update()})),n()}},"Add ",t.length," to playlist"),r.a.createElement("ul",null,c.map((function(e){var t=e.name,n=e.id;return r.a.createElement("li",Object.assign({key:n,className:i()({selected:u(n)})},s(n)),t)})))):r.a.createElement(K,null)},se=Object(a.memo)((function(e){var t,n=e.songs,c=Object(J.a)(e,["songs"]),o=ue(n),l=H().open,u=Object(a.useMemo)((function(){var e;return[].concat(Object(b.a)(null!==(e=c.actions)&&void 0!==e?e:[]),[{icon:g.r,display:function(e){return"Add ".concat(e," song").concat(1===e?"":"s"," to playlist")},action:function(e){return l(r.a.createElement(ie,{songs:e}))}}])}),[c.actions]);if(0===(null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0))return r.a.createElement("p",{style:{gridArea:"songs"},className:"empty-info"},"No songs yet");var s=o.selected();return r.a.createElement("div",{className:"songlist"},r.a.createElement("div",{className:"actions"},s.length>0?u.map((function(e,t){var n=e.icon,a=e.display,c=e.action,o="string"===typeof a?a:a(s.length);return r.a.createElement("button",{key:t,className:i()({disabled:0===s.length}),onClick:function(){return c(s)}},r.a.createElement(E.a,{icon:n}),r.a.createElement("span",null,o))})):r.a.createElement("p",{className:"empty-info"},"No songs selected")),r.a.createElement("div",{className:"table"},r.a.createElement("div",null,r.a.createElement("p",null),r.a.createElement("p",null,"Title"),r.a.createElement("p",null,"Artists"),r.a.createElement("p",null,"Album"),r.a.createElement("p",null,"Length"),r.a.createElement("p",null),r.a.createElement("p",null)),n.map((function(e){return r.a.createElement(me,Object.assign({selection:o},{key:e.id},{song:e,songs:n}))}))))})),me=function(e){var t,n=e.song,a=e.selection,c=e.songs,o=H().open,l=P().queue;if("string"===typeof n)return r.a.createElement(de,Object.assign({url:n},{selection:a}));var u=n.album,s=n.artists,m=n.title,f=n.length,d=n.id,v=null!==(t=null===a||void 0===a?void 0:a.isSelected(d))&&void 0!==t&&t;return r.a.createElement("div",Object.assign({className:i()({selected:v})},null===a||void 0===a?void 0:a.events(d)),r.a.createElement(F,{song:n,songs:c}),r.a.createElement("p",null,m),r.a.createElement("p",null,s.map((function(e){return r.a.createElement(ve,{key:e,url:e})}))),r.a.createElement("p",null,r.a.createElement(pe,{url:u})),r.a.createElement("p",null,f),r.a.createElement(fe,{icon:g.g,onClick:function(){return o(r.a.createElement(oe,{song:n}))}}),r.a.createElement(fe,{icon:g.m,onClick:function(){return null===l||void 0===l?void 0:l.add(n)}}))},fe=function(e){var t=e.onClick,n=e.icon;return r.a.createElement("button",{onClick:t},r.a.createElement(E.a,{icon:n}))},de=function(e){var t=e.url,n=Object(J.a)(e,["url"]);return W(t,(function(e){return r.a.createElement(me,Object.assign({},n,{song:e}))}))},ve=function(e){var t=B(e.url),n=Object(l.a)(t,1)[0];return n?r.a.createElement(m.b,{className:"seperate-comma",to:"/artists/".concat(n.id)},n.name):null},pe=function(e){var t=B(e.url),n=Object(l.a)(t,1)[0];return n?r.a.createElement(m.b,{className:"seperate-comma",to:"/albums/".concat(n.id)},n.name):null},he=se,be=function(e){var t=e.name,n=e.artists,a=e.songs,c=e.cover_url,o=I(a),u=Object(l.a)(o,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{src:c,alt:t}),r.a.createElement(_,{area:"artists"},n.map((function(e){return r.a.createElement(ge,{key:e,url:e})}))),r.a.createElement(he,{songs:u}))},ge=function(e){return W(e.url,(function(e){var t=e.name,n=e.id;return r.a.createElement(m.b,{to:"/artists/".concat(n)},t)}))},Ee=r.a.memo((function(){return r.a.createElement(Y,{create:!0,endpoint:"album",render:function(e){return r.a.createElement(be,e)}})})),Oe=r.a.memo((function(){return r.a.createElement(Y,{create:!0,endpoint:"artist",render:function(e){return r.a.createElement(je,e)}})})),je=function(e){var t=e.albums;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{area:"albums"},t.length>0?t.map((function(e){return r.a.createElement(ye,{key:e,url:e})})):r.a.createElement("p",{className:"empty-info"},"No albums yet")))},ye=function(e){return W(e.url,(function(e){var t=e.cover_url,n=e.name,a=e.release,c=e.songs,o=e.id;return r.a.createElement(m.b,{to:"/albums/".concat(o)},r.a.createElement("h5",null,n," - (Genre ",a,")"),r.a.createElement(Q,{src:t,alt:"Cover"}),r.a.createElement("table",null,r.a.createElement("tbody",null,c.length>0?c.map((function(e){return r.a.createElement(ke,{key:e,url:e})})):r.a.createElement("tr",null,r.a.createElement("td",{className:"empty-info"},"No songs yet")))))}))},ke=function(e){var t=B(e.url),n=Object(l.a)(t,1)[0];return r.a.createElement("tr",null,n?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,n.name),r.a.createElement("td",null,n.length)):r.a.createElement("td",{rowSpan:2},r.a.createElement(K,null)))},we=Oe,Se=n(36),Ne=function(){var e=Object(s.g)().pathname,t=[{href:"/songs",text:"Songs",icon:g.o},{href:"/playlists",text:"Playlists",icon:g.m},{href:"/albums",text:"Albums",icon:g.d},{href:"/artists",text:"Artists",icon:g.B},{href:"/upload",text:"Upload",icon:g.A},{href:"/logout",text:"Logout",icon:g.e}];return r.a.createElement("nav",null,r.a.createElement("ul",null,t.map((function(t){var n=t.text,a=t.href,c=t.icon;return r.a.createElement(m.b,{key:a,to:a},r.a.createElement("li",{className:i()({active:e===a})},r.a.createElement("span",null,n),r.a.createElement(E.a,{icon:c})))}))))},xe={theme:"dark"},Ce=Object(a.createContext)([xe,function(){}]);var Te=Ce.Provider,Me=function(){var e=Object(a.useContext)(Ce),t=Object(l.a)(e,2)[1],n=[["dark",g.n],["light",g.y],["red",g.i]];return r.a.createElement("div",{className:"settings"},r.a.createElement("h1",null,"Settings"),r.a.createElement("ul",null,n.map((function(e){var n=Object(l.a)(e,2),a=n[0],c=n[1];return r.a.createElement("button",{key:a,className:"icon-button",onClick:function(){return t((function(e){return Object(d.a)(Object(d.a)({},e),{},{theme:a})}))}},r.a.createElement(E.a,{icon:c}))}))))},Ae=function(e){var t=e.area,n=e.icon,a=e.disabled,c=e.onClick,o=e.active;return r.a.createElement(_,Object.assign({className:i()("icon-button",{disabled:a||!c,active:o}),area:null!==t&&void 0!==t?t:""},{onClick:c}),r.a.createElement(E.a,{icon:n}))},Fe=function(){var e,t=P(),n=t.songs,a=t.queue,c=[["Queue",null!==(e=null===a||void 0===a?void 0:a.songs)&&void 0!==e?e:[]],["Next",n]].filter((function(e){return Object(l.a)(e,2)[1].length>0}));return r.a.createElement("div",{className:"queue demarg"},c.map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement("p",null,n),r.a.createElement("ul",{key:n},a.map((function(e,t){var n=e.title,a=e.id;return r.a.createElement("li",{key:"".concat(a,"-").concat(t)},n)}))))})))},Pe=function(e){var t=Math.floor(e/60),n=e-60*t;return"".concat(t,":").concat(n.toFixed(0).padStart(2,"0"))},De=function(e){var t=e.title,n=e.artists,a=e.length,c=e.position;return r.a.createElement(_,{area:"info"},r.a.createElement("h4",null,t),r.a.createElement("p",null,null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(Le,{key:e,url:e})}))),r.a.createElement("div",{className:"song-progress"},r.a.createElement("span",null,Pe(c)),r.a.createElement("span",null,"-",Pe(a-c)),r.a.createElement("div",{style:{width:"".concat(c/a*100,"%")}})))},Le=function(e){var t=B(e.url),n=Object(l.a)(t,1)[0];return n?r.a.createElement("span",null,n.name):null},Be=function(){var e=function(){var e=Object(a.useContext)(C);if(!e)throw new Error("There is no player defined");var t=e.audio,n=Object(a.useState)(.4),r=Object(l.a)(n,2),c=r[0],o=r[1],u=Object(a.useState)(c),i=Object(l.a)(u,2),s=i[0],m=i[1],f=function(e){var n=Math.min(1,Math.max(0,e));o(n),t.volume=n};Object(a.useEffect)((function(){var e=function(){return o((function(e){return t.volume!==e?t.volume:e}))};return t.addEventListener("volumechange",e),function(){return t.removeEventListener("volumechange",e)}}),[t]),Object(a.useEffect)((function(){t.volume=c}),[c,t]);return{volume:c,setVolume:f,toggleVolume:function(){c>0?(m(c),f(0)):f(s)}}}(),t=e.volume,n=e.setVolume,c=e.toggleVolume,o=0===t?g.D:t<.5?g.C:g.E,u=function(e){var t=e.currentTarget.offsetWidth,a=e.currentTarget.getBoundingClientRect().left,r=e.clientX-a;n(r/t)};return r.a.createElement(_,{area:"volume"},r.a.createElement(Ae,Object.assign({icon:o},{onClick:c})),r.a.createElement("div",{className:"bar",onClick:u,onMouseMove:function(e){e.buttons>0&&u(e)}},r.a.createElement("div",{style:{width:"".concat(100*t,"%")}})))},Ie=function(){var e,t=P(),n=t.song,a=t.position,c=t.play,o=t.pause,l=t.playing,u=t.songs,i=t.queue,s=t.previous,m=t.next,f=t.shuffle,d=t.setShuffle,v=t.repeat,p=t.setRepeat,h=H().open;return r.a.createElement(_,{area:"player"},n&&r.a.createElement(De,Object.assign({},n,{position:a})),r.a.createElement(Ae,{onClick:s,icon:g.w,area:"previous"}),r.a.createElement(Ae,{onClick:m,icon:g.x,area:"next"}),r.a.createElement(Ae,{onClick:l()?o:function(){return c()},icon:l()?g.p:g.q,area:"play"}),r.a.createElement(Ae,{active:f,onClick:function(){return d((function(e){return!e}))},icon:g.s,area:"shuffle"}),r.a.createElement(Ae,{active:v,onClick:function(){return p((function(e){return!e}))},icon:g.u,area:"repeat"}),r.a.createElement(Ae,{disabled:u.length+(null!==(e=null===i||void 0===i?void 0:i.songs.length)&&void 0!==e?e:0)===0,icon:g.m,area:"queue",onClick:function(){return h(r.a.createElement(Fe,null))}}),r.a.createElement(Ae,{icon:g.c,area:"settings",onClick:function(){return h(r.a.createElement(Me,null))}}),r.a.createElement(Be,null))},Ue=function(e){var t=e.songsinplaylist,n=e.resource_uri,c=H().close,o=U("song"),u=Object(l.a)(o,2),s=u[0],m=u[1],d=Object(a.useMemo)((function(){var e;return null!==(e=null===s||void 0===s?void 0:s.filter((function(e){return!function(e){return t.includes(e.resource_uri)}(e)})))&&void 0!==e?e:[]}),[s]),v=ue(d),p=v.isSelected,h=v.events,g=v.selected;return m?r.a.createElement(K,null):r.a.createElement("div",{className:"add-songs demarg"},r.a.createElement("button",{className:"primary",onClick:function(){var e=g().map((function(e){return e.resource_uri}));f.a.put(n,{songsinplaylist:[].concat(Object(b.a)(t),Object(b.a)(e))}).catch((function(e){return console.error(e)})),c()}},"Add selected to playlist"),r.a.createElement("ul",null,d.map((function(e){var t=e.title,n=e.id;return r.a.createElement("li",Object.assign({key:n,className:i()({selected:p(n)})},h(n)),t)}))))},Re=function(e){var t=I(e.songsinplaylist),n=Object(l.a)(t,1)[0],a=H().open;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return a(r.a.createElement(Ue,e))}},r.a.createElement(E.a,{icon:g.r})),r.a.createElement(he,Object.assign({songs:n},{actions:[{icon:g.z,display:function(e){return"Remove ".concat(e," song").concat(1===e?"":"s")},action:function(e){}}]})))},Ke=r.a.memo((function(){return r.a.createElement(Y,{create:!0,endpoint:"playlist",render:function(e){return r.a.createElement(Re,e)}})})),We=function(){var e=Object(s.h)().id;return R("playlist",(function(t){return r.a.createElement(_,{area:"playlists"},t.length>0?r.a.createElement("ul",{className:"list"},t.map((function(t){var n=t.id,a=t.name;return r.a.createElement(m.b,{key:n,to:"/playlists/".concat(n)},r.a.createElement("li",{className:i()({active:n.toString()===e})},a))}))):r.a.createElement("p",{className:"empty-info"},"No playlists yet"))}))},Je=n(24),_e=n(25),qe=["Daunting Moons","The Inside-Out Matter","No One Works At Anger","It Uses They","Pawns At the Spring","The Bowl Find","Obstructing History","Sing Doors","Feverish Thorns","Listen","Thoughts","From The Phantom Penguins","Rule Dos On a Prisoner","Visions In Cadenza","The Ambitious Sweet Child","The Love of Journal","The Magic's Act","Mercy Buy School","Gamble Broadcasting","On They Savior","Dreaming Universes","Missing","Bound Cigars","The Smooth Stream","I Sends Through Expression","No One Finishs Everybody","Something Without the Swords","The Harmony Imagine","Typing Activity","Try Right Now","Bare Machinations","Have","Moment","Of The Venturesome Bond","Photography Cans From a Building","Power From Serenade","The Cool Yearning","The Places of Sweet Child","The Souls's Children","Earaches Listen Crafter","Healing Kneeling","From He Person","Drooling Lines","Undoubted","Bad Outlaws","The Which Island","It Stands Under Expectations","I Puts Its","Date Under the Forever","The Death Give","Slaughtering Matter","Lose War","Solitary Body","Drink","Touch","Like The Same Fair","Building Feels Under a Rose","Flames Of Official","The Abandoned Disk","The Height of Silk","The Anything's Terror","Hope Understand Muse","Village Sailing","Through We Woman","Pleading Names","Hungry"],He=["Talking Heads","Carl Perkins","Curtis Mayfield","R.E.M.","Diana Ross and the Supremes","Lynyrd Skynyrd","Nine Inch Nails","Booker T. and the MGs","Guns n\u2019 Roses","Tom Petty","Carlos Santana","The Yardbirds","Jay-Z","Gram Parsons","Tupac Shakur","Black Sabbath","James Taylor","Eminem","Creedence Clearwater Revival","The Drifters","Elvis Costello","The Four Tops","The Stooges","Beastie Boys","The Shirelles","Eagles","Hank Williams","Radiohead","AC/DC","Frank Zappa","The Police","Jackie Wilson","The Temptations","Cream","Al Green","The Kinks","Phil Spector","Tina Turner","Joni Mitchell","Metallica","The Sex Pistols","Aerosmith","Parliament and Funkadelic","Grateful Dead","Dr. Dre","Eric Clapton","Howlin\u2019 Wolf","The Allman Brothers Band","Queen","Pink Floyd"];function Ge(e,t){return e.sort((function(e,t){return Math.random()-.5})).slice(0,Math.min(e.length,t))}var Ve=new(function(){function e(){Object(Je.a)(this,e)}return Object(_e.a)(e,[{key:"tags",value:function(e){return[]}},{key:"artists",value:function(e){return Ge(He,e).map((function(e){return{name:e,type:"P"}}))}},{key:"albums",value:function(e){var t=e.map((function(e){return e.resource_uri}));return function(e){return Ge(qe,e).map((function(e){return{name:e,artists:Ge(t,2),release:"".concat(1960+Math.floor(60*Math.random()))}}))}}},{key:"songs",value:function(e){return function(t){return Ge(qe,t).map((function(t){var n=Ge(e,1)[0];return{title:t,artists:n.artists,album:n.resource_uri,length:Math.floor(100*Math.random()+100)}}))}}},{key:"playlists",value:function(e){return new Array(e).fill(null).map((function(e,t){return{name:"Playlist "+t}}))}},{key:"wait",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"seedModels",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,a,r){var c,o,l,u,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===r||void 0===r||null===(c=r.setMessage)||void 0===c||c.call(null,"Fetching ".concat(t,"s")),null===r||void 0===r||r.setProgress(0),e.next=4,f.a.fetch(t);case 4:return u=e.sent,null===r||void 0===r||r.setTotal(u.objects.length+n),null===r||void 0===r||null===(o=r.setMessage)||void 0===o||o.call(null,"Deleting ".concat(t,"s")),e.next=9,Promise.all(u.objects.map((function(e){return f.a.delete(e.resource_uri,{},!1).catch((function(e){return console.error(e)})).then((function(){return null===r||void 0===r?void 0:r.setProgress((function(e){return e+1}))}))})));case 9:return null===r||void 0===r||null===(l=r.setMessage)||void 0===l||l.call(null,"Seeding ".concat(t,"s")),e.next=12,Promise.all(a(n).map((function(e){return f.a.post(t,e,!1).catch((function(e){return console.error(e)})).then((function(){return null===r||void 0===r?void 0:r.setProgress((function(e){return e+1}))}))})));case 12:return e.next=14,f.a.fetch(t);case 14:return i=e.sent,s=i.objects,e.abrupt("return",s);case 17:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"uploadFile",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===a||void 0===a||a.setTotal(t.length),null===a||void 0===a||a.setProgress(0),null===a||void 0===a||null===(r=a.setMessage)||void 0===r||r.call(null,"Uploading Songs"),t.map((function(){var e=n(57);console.log(e),null===a||void 0===a||a.setProgress((function(e){return e+1}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"seed",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a,r,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.seedModels("artist",20,this.artists,t);case 2:return r=e.sent,e.next=5,this.seedModels("album",20,this.albums(r),t);case 5:return c=e.sent,e.next=8,this.seedModels("song",70,this.songs(c),t);case 8:return o=e.sent,e.next=11,this.uploadFile(o,t);case 11:null===t||void 0===t||null===(n=t.setMessage)||void 0===n||n.call(null,"Done"),this.wait(200),null===t||void 0===t||t.setTotal(0),null===t||void 0===t||null===(a=t.setMessage)||void 0===a||a.call(null,null),f.a.update();case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),ze=["songinplaylist","track","apikey"],Qe=function(e){var t,n=e.endpoint,a=B(n),c=Object(l.a)(a,1)[0],o=null===c||void 0===c||null===(t=c.objects)||void 0===t?void 0:t.length;return c&&void 0===o?null:r.a.createElement("div",null,r.a.createElement("p",null,n),r.a.createElement("p",null,c?"".concat(o," model").concat(1===o?"":"s"):r.a.createElement(K,null)))},Ye=r.a.memo((function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(0),u=Object(l.a)(o,2),s=u[0],m=u[1],f=Object(a.useState)(null),d=Object(l.a)(f,2),v=d[0],p=d[1],h=s>0,b=B(""),g=Object(l.a)(b,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"endpoints"},g&&Object.keys(g).filter((function(e){return!ze.includes(e.toLowerCase())})).map((function(e){return r.a.createElement(Qe,{key:e,endpoint:e})}))),r.a.createElement("button",{className:i()({disabled:h}),onClick:function(){return Ve.seed({setProgress:c,setTotal:m,setMessage:p}).catch((function(e){return console.error(e)}))}},r.a.createElement("p",null,h?"Seeding...":"Seed!")),h&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"progress"},r.a.createElement("div",{style:{width:"".concat(n/s*100,"%")}}),r.a.createElement("p",null,n," / ",s)),r.a.createElement("p",null,v)))})),Ze=Object(a.memo)((function(){return R("song",(function(e){return r.a.createElement(he,{songs:e})}))})),Xe=(n(58),function(e){var t=e.children;return r.a.createElement("section",{className:"single"},t)}),$e=function(){return Object(a.useEffect)((function(){f.a.logout()})),r.a.createElement(s.a,{to:""})},et=function(e){var t,n=Object(s.g)().pathname.slice(1)+"/",c=null!==(t=e.id)&&void 0!==t?t:n.slice(0,n.indexOf("/"));return Object(a.useEffect)((function(){document.title="OSS - "+c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()}),[c]),r.a.createElement(_,{area:"page",id:c},r.a.createElement(e.component,null))},tt=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){f.a.isLoggedIn().then((function(e){return c(e)}))}),[]);var o=Object(a.useState)(null),u=A(),d=Object(a.useState)([]),v=function(){var e=localStorage.getItem("settings"),t=e?JSON.parse(e):xe,n=Object(a.useState)(t),r=Object(l.a)(n,2),c=r[0],o=r[1];return Object(a.useEffect)((function(){localStorage.setItem("settings",JSON.stringify(c))}),[c]),[c,o]}(),p=Object(l.a)(v,2),h=p[0],b=p[1],g=h.theme,E=[{path:"/playlists/:id?",component:Ke},{path:"/artists/:id?",component:we},{path:"/albums/:id?",component:Ee},{path:"/songs",component:Ze},{path:"/seed",component:Ye},{path:"/upload",component:le}];return r.a.createElement(Te,{value:[h,b]},r.a.createElement(G,{value:o},r.a.createElement(T,{value:u},r.a.createElement(N,{value:d},r.a.createElement(m.a,null,r.a.createElement("section",{className:i()(g)},n?r.a.createElement("section",{className:"container"},r.a.createElement(Ne,null),r.a.createElement(Ie,null),r.a.createElement(te,null),r.a.createElement(We,null),r.a.createElement(V,null),r.a.createElement(x,null),r.a.createElement(s.d,null,E.map((function(e){return r.a.createElement(s.b,{key:e.path,path:e.path},r.a.createElement(et,e))})),r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(s.a,{to:"/playlists"})),r.a.createElement(s.b,{path:"/logout"},r.a.createElement($e,null)),r.a.createElement(s.b,null,r.a.createElement(_,{area:"page"},r.a.createElement("h1",{className:"empty-info"},"404 - Not Found"))))):r.a.createElement(Xe,null,!1===n?r.a.createElement(Se.a,null):r.a.createElement(K,null))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(tt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.72754e7f.chunk.js.map