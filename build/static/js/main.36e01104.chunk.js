(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{29:function(e,t,n){e.exports=n.p+"static/media/test.cf56ed92.mp3"},34:function(e,t,n){"use strict";(function(e){var a=n(1),r=n(0),c=n.n(r),o=n(7),l=n(9);t.a=function(){var t=Object(r.useState)(""),n=Object(a.a)(t,2),u=n[0],i=n[1],s=Object(r.useState)(""),m=Object(a.a)(s,2),f=m[0],d=m[1],p=Object(r.useState)(null),v=Object(a.a)(p,2),h=v[0],g=v[1];return c.a.createElement("div",{className:"user-login"},c.a.createElement("form",{onSubmit:function(t){var n;t.preventDefault(),o.a.login((n="".concat(u,":").concat(f),new e(n).toString("base64"))).catch((function(e){return g(e.message)}))}},c.a.createElement("h1",null,"Login"),h&&c.a.createElement("p",{className:"error"},h),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"username"},"Username"),c.a.createElement("input",{id:"username",type:"text",placeholder:"Username",onChange:function(e){return i(e.target.value)},value:u,required:!0})),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{id:"password",type:"password",placeholder:"Password",onChange:function(e){return d(e.target.value)},value:f,required:!0})),c.a.createElement("button",{type:"submit"},"Login"),c.a.createElement(l.b,{to:"/registration"},"Register")))}}).call(this,n(52).Buffer)},36:function(e,t,n){e.exports=n(57)},49:function(e,t,n){},56:function(e,t,n){e.exports=n.p+"static/media/example-cover.b2e600a7.jpg"},57:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),o=n.n(c),l=n(1),u=n(16),i=n(9),s=n(17),m=n(3),f=n.n(m),d=n(8),p=n(7),v=n(13),h=n(4),g=Object(a.createContext)({play:function(){},pause:function(){},position:0,shuffle:!1,repeat:!1,setShuffle:function(){},setRepeat:function(){},playing:function(){return!1},volume:0,setVolume:function(){},toggleVolume:function(){}}),b=g.Provider;function E(){return Object(a.useContext)(g)}function y(){var e=Object(a.useState)(void 0),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(l.a)(c,2),u=o[0],i=o[1],m=Object(a.useState)(!0),v=Object(l.a)(m,2),h=v[0],g=v[1],b=Object(a.useState)(0),E=Object(l.a)(b,2),y=E[0],O=E[1],j=function(){return O(k.currentTime)},k=Object(a.useMemo)((function(){return new Audio}),[]),w=function(e){var t=Object(a.useState)(.4),n=Object(l.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(r),u=Object(l.a)(o,2),i=u[0],s=u[1],m=function(t){e.volume=t};return Object(a.useEffect)((function(){var t=function(){return c(e.volume)};return e.addEventListener("volumechange",t),function(){return e.removeEventListener("volumechange",t)}}),[e]),Object(a.useEffect)((function(){e.volume=r}),[r,e]),{volume:r,setVolume:m,toggleVolume:function(){r>0?(s(r),m(0)):m(i)}}}(k);Object(a.useEffect)((function(){return k.addEventListener("timeupdate",j),function(){return k.removeEventListener("timeupdate",j)}}),[k]);var S=function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,p.a.audio(t.audio).then((function(e){r(t),k.src=e,k.currentTime=0,k.play()})).catch((function(e){return console.log(e)}));case 3:e.next=7;break;case 5:return e.next=7,null===k||void 0===k?void 0:k.play();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.a)({song:n?Object(s.a)({},n,{length:k.duration}):void 0,play:S,pause:function(){null===k||void 0===k||k.pause()},shuffle:u,repeat:h,setShuffle:i,setRepeat:g,playing:function(){return!!k&&!k.paused},position:y},w)}function O(e){var t=e.song,n=E(),a=n.play,c=n.pause,o=n.playing,l=n.song,u=t.id===(null===l||void 0===l?void 0:l.id);return r.a.createElement("button",Object.assign({className:"song-button"},{onClick:function(){u?o()?c():a():a(t)}}),r.a.createElement(v.a,{icon:u&&o()?h.h:h.i}))}var j=E,k=(n(49),n(23)),w=n.n(k);function S(e,t){var n=Object(a.useState)(),r=Object(l.a)(n,2),c=r[0],o=r[1],u=Object(a.useState)(!0),i=Object(l.a)(u,2),s=i[0],m=i[1],f=Object(a.useState)(),d=Object(l.a)(f,2),v=d[0],h=d[1],g=w.a.encode(t);return Object(a.useEffect)((function(){return m(!0),o(void 0),p.a.subscribe(e,g).then((function(e,t){o(e),h(null===t||void 0===t?void 0:t.message),m(!1)}))}),[g,e]),[c,s,v]}function x(){return r.a.createElement("span",{className:"loading"})}function T(e,t,n){var a="function"===typeof t?t:n,c=S(e,"object"===typeof t?t:void 0),o=Object(l.a)(c,3),u=o[0],i=o[1],s=o[2];return i?r.a.createElement(x,null):u?a?a(u):null:r.a.createElement("span",{className:"empty-info"},s||"Not found")}var N=n(15),C=n(14),M=n.n(C);var P=function(e){var t=e.children,n=e.className,a=e.area,c=e.style,o=Object(N.a)(e,["children","className","area","style"]);return r.a.createElement("div",Object.assign({className:"".concat(null!==n&&void 0!==n?n:""," ").concat(a),style:Object(s.a)({gridArea:a,position:"relative"},c)},o),t)},A=[h.e,h.g,h.d,h.c,h.k,h.a];function F(e){var t=e.src,n=e.alt,c=Object(N.a)(e,["src","alt"]),o=Object(a.useState)(!1),u=Object(l.a)(o,2),i=u[0],m=u[1],f=Object(a.useMemo)((function(){return A[Math.floor(Math.random()*A.length)]}),[]);return r.a.createElement(P,{area:"cover",style:Object(s.a)({},c)},r.a.createElement("img",Object.assign({onLoad:function(){return m(!0)},onError:function(){return m(!1)},draggable:!1},{alt:n,src:t})),!i&&r.a.createElement(v.a,{icon:f}))}function B(e){var t=e.endpoint,n=Object(u.h)().id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{endpoint:t}),r.a.createElement(P,{area:"active"},n?r.a.createElement(L,Object.assign({id:n},e)):r.a.createElement("h1",null,"Select a",t.match(/^[aeiou]/i)?"n":""," ",t)))}function L(e){var t=e.id,n=e.endpoint,a=e.render;return T("".concat(n,"/").concat(t),(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,e.name),a(e))}))}function D(e){var t=e.endpoint,n=Object(u.h)().id;return T(t,(function(e){var a=e.objects;return r.a.createElement(P,{area:"list"},r.a.createElement("ul",{className:"list"},a.length>0?a.map((function(e){var a=e.name,c=e.id;return r.a.createElement("li",{key:c,className:M()({active:c.toString()===n})},r.a.createElement(i.b,{to:"/".concat(t,"s/").concat(c)},a))})):r.a.createElement("li",{className:"empty-info"},"No ",t,"s yet")))}))}function I(e){var t=S(e.album),n=Object(l.a)(t,1)[0];return r.a.createElement(F,{src:null===n||void 0===n?void 0:n.cover_url,alt:"Active Song Cover"})}var R=function(){var e=j().song;return e?r.a.createElement(I,e):null};function U(e){var t=e.song;if("string"===typeof t)return r.a.createElement(W,{url:t});var n=t.album,a=t.artists,c=t.title,o=t.length;return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(O,{song:t})),r.a.createElement("p",null,c),r.a.createElement("p",null,a.map((function(e){return r.a.createElement(H,{key:e,url:e})}))),r.a.createElement("p",null,r.a.createElement(J,{url:n})),r.a.createElement("p",null,o))}function W(e){return T(e.url,(function(e){return r.a.createElement(U,{song:e})}))}function H(e){var t=S(e.url),n=Object(l.a)(t,1)[0];return n?r.a.createElement(i.b,{className:"seperate-comma",to:"/artists/".concat(n.id)},n.name):null}function J(e){var t=S(e.url),n=Object(l.a)(t,1)[0];return n?r.a.createElement(i.b,{className:"seperate-comma",to:"/albums/".concat(n.id)},n.name):null}var V=function(e){var t,n=e.songs;return 0===(null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0)?r.a.createElement("p",{className:"empty-info"},"No songs yet"):r.a.createElement("div",{className:"songlist"},r.a.createElement("div",null,r.a.createElement("p",{id:"play"}),r.a.createElement("p",{id:"title"},"Title"),r.a.createElement("p",{id:"artists"},"Artists"),r.a.createElement("p",{id:"album"},"Album"),r.a.createElement("p",{id:"length"},"Length")),n.map((function(e){return r.a.createElement(U,Object.assign({key:"string"===typeof e?e:e.id},{song:e}))})))};function G(e){var t=e.name,n=e.artists,a=e.songs,c=e.cover_url;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{src:c,alt:t}),r.a.createElement(P,{area:"artists"},n.map((function(e){return r.a.createElement(K,{key:e,url:e})}))),r.a.createElement(V,{songs:a}))}function K(e){return T(e.url,(function(e){var t=e.name,n=e.id;return r.a.createElement(i.b,{to:"/artists/".concat(n)},t)}))}var _=function(){return r.a.createElement(B,{endpoint:"album",render:function(e){return r.a.createElement(G,e)}})};function z(e){var t=e.albums;return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{area:"albums"},t.length>0?t.map((function(e){return r.a.createElement(q,{key:e,url:e})})):r.a.createElement("p",{className:"empty-info"},"No albums yet")))}function q(e){return T(e.url,(function(e){var t=e.cover_url,n=e.name,a=e.release,c=e.songs;return r.a.createElement("div",null,r.a.createElement("h5",null,n," - (Genre ",a,")"),r.a.createElement(F,{src:t,alt:"Cover"}),r.a.createElement("table",null,r.a.createElement("tbody",null,c.length>0?c.map((function(e){return r.a.createElement(Y,{key:e,url:e})})):r.a.createElement("tr",null,r.a.createElement("td",{className:"empty-info"},"No songs yet")))))}))}function Y(e){var t=S(e.url),n=Object(l.a)(t,1)[0];return r.a.createElement("tr",null,n?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,n.name),r.a.createElement("td",null,n.length)):r.a.createElement("td",{rowSpan:2},r.a.createElement(x,null)))}var Z=function(){return r.a.createElement(B,{endpoint:"artist",render:function(e){return r.a.createElement(z,e)}})},Q=n(60),X=n(59);var $=r.a.createContext([null,function(){}]);var ee=$.Provider,te=function(e){var t=e.dialog,n=function(){var e=Object(a.useContext)($),t=Object(l.a)(e,2)[1];return{open:t,close:function(){return t(null)}}}().close;return r.a.createElement(Q.a,null,t&&r.a.createElement(X.a,{key:"dialog",timeout:200},r.a.createElement("div",{className:"dialog"},r.a.createElement("p",null,t.text),r.a.createElement("ul",null,t.buttons.map((function(e,t){var a=e.text,c=e.className,o=e.click;return r.a.createElement("button",Object.assign({key:t,onClick:function(){o&&o(),n()}},{className:c}),a)}))))))};var ne=function(){var e=Object(u.g)().pathname,t=[{href:"/playlists",text:"Playlists",icon:h.f},{href:"/albums",text:"Albums",icon:h.a},{href:"/artists",text:"Artists",icon:h.p},{href:"/songs",text:"Songs",icon:h.g},{href:"/seed",text:"Seeder",icon:h.m},{href:"/logout",text:"Logout",icon:h.b}];return r.a.createElement("nav",null,r.a.createElement("ul",null,t.map((function(t){var n=t.text,a=t.href,c=t.icon;return r.a.createElement("li",{key:a,className:M()({active:e===a})},r.a.createElement(i.b,{to:a},r.a.createElement("span",null,n),r.a.createElement(v.a,{icon:c})))}))))};function ae(e){var t=e.area,n=e.icon,a=Object(N.a)(e,["area","icon"]);return r.a.createElement(P,Object.assign({className:"icon-button",area:null!==t&&void 0!==t?t:""},a),r.a.createElement(v.a,{icon:n}))}function re(e){var t=Math.floor(e/60),n=e-60*t;return"".concat(t,":").concat(n.toFixed(0).padStart(2,"0"))}function ce(e){var t=e.title,n=e.artists,a=e.length,c=e.position;return r.a.createElement(P,{area:"info"},r.a.createElement("h4",null,t),r.a.createElement("p",null,null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(oe,{key:e,url:e})}))),r.a.createElement("div",{className:"song-progress"},r.a.createElement("span",null,re(c)),r.a.createElement("span",null,"-",re(a-c)),r.a.createElement("div",{style:{width:"".concat(c/a*100,"%")}})))}function oe(e){var t=S(e.url),n=Object(l.a)(t,1)[0];return n?r.a.createElement("span",null,n.name):null}function le(){var e=j(),t=e.volume,n=e.setVolume,a=e.toggleVolume,c=0===t?h.r:t<.5?h.q:h.s,o=function(e){var t=e.currentTarget.offsetWidth,a=e.currentTarget.getBoundingClientRect().left,r=e.clientX-a;n(r/t)};return r.a.createElement(P,{area:"volume"},r.a.createElement(ae,Object.assign({icon:c},{onClick:a})),r.a.createElement("div",{className:"bar",onClick:o,onMouseMove:function(e){e.buttons>0&&o(e)}},r.a.createElement("div",{style:{width:"".concat(100*t,"%")}})))}var ue=function(){var e=j(),t=e.song,n=e.position,a=e.play,c=e.pause,o=e.playing;return r.a.createElement(P,{area:"player"},t&&r.a.createElement(ce,Object.assign({},t,{position:n})),r.a.createElement(ae,{icon:h.n,area:"previous"}),r.a.createElement(ae,{icon:h.o,area:"next"}),r.a.createElement(ae,{onClick:o()?c:function(){return a()},icon:o()?h.h:h.i,area:"play"}),r.a.createElement(ae,{icon:h.j,area:"shuffle"}),r.a.createElement(ae,{icon:h.l,area:"repeat"}),r.a.createElement(le,null))};function ie(e){var t=e.songs;Object(N.a)(e,["songs"]);return r.a.createElement(V,{songs:t})}var se=function(){return r.a.createElement(B,{endpoint:"playlist",render:function(e){return r.a.createElement(ie,e)}})};var me=function(){var e=Object(u.h)().id;return T("playlist",(function(t){var n=t.objects;return r.a.createElement(P,{area:"playlists"},n.length>0?r.a.createElement("ul",{className:"list"},n.map((function(t){var n=t.id,a=t.name;return r.a.createElement("li",{key:n,className:M()({active:n.toString()===e})},r.a.createElement(i.b,{to:"/playlists/".concat(n)},a))}))):r.a.createElement("p",{className:"empty-info"},"No playlists yet"))}))},fe=n(21),de=n(22),pe=["Daunting Moons","The Inside-Out Matter","No One Works At Anger","It Uses They","Pawns At the Spring","The Bowl Find","Obstructing History","Sing Doors","Feverish Thorns","Listen","Thoughts","From The Phantom Penguins","Rule Dos On a Prisoner","Visions In Cadenza","The Ambitious Sweet Child","The Love of Journal","The Magic's Act","Mercy Buy School","Gamble Broadcasting","On They Savior","Dreaming Universes","Missing","Bound Cigars","The Smooth Stream","I Sends Through Expression","No One Finishs Everybody","Something Without the Swords","The Harmony Imagine","Typing Activity","Try Right Now","Bare Machinations","Have","Moment","Of The Venturesome Bond","Photography Cans From a Building","Power From Serenade","The Cool Yearning","The Places of Sweet Child","The Souls's Children","Earaches Listen Crafter","Healing Kneeling","From He Person","Drooling Lines","Undoubted","Bad Outlaws","The Which Island","It Stands Under Expectations","I Puts Its","Date Under the Forever","The Death Give","Slaughtering Matter","Lose War","Solitary Body","Drink","Touch","Like The Same Fair","Building Feels Under a Rose","Flames Of Official","The Abandoned Disk","The Height of Silk","The Anything's Terror","Hope Understand Muse","Village Sailing","Through We Woman","Pleading Names","Hungry"],ve=["Talking Heads","Carl Perkins","Curtis Mayfield","R.E.M.","Diana Ross and the Supremes","Lynyrd Skynyrd","Nine Inch Nails","Booker T. and the MGs","Guns n\u2019 Roses","Tom Petty","Carlos Santana","The Yardbirds","Jay-Z","Gram Parsons","Tupac Shakur","Black Sabbath","James Taylor","Eminem","Creedence Clearwater Revival","The Drifters","Elvis Costello","The Four Tops","The Stooges","Beastie Boys","The Shirelles","Eagles","Hank Williams","Radiohead","AC/DC","Frank Zappa","The Police","Jackie Wilson","The Temptations","Cream","Al Green","The Kinks","Phil Spector","Tina Turner","Joni Mitchell","Metallica","The Sex Pistols","Aerosmith","Parliament and Funkadelic","Grateful Dead","Dr. Dre","Eric Clapton","Howlin\u2019 Wolf","The Allman Brothers Band","Queen","Pink Floyd"];function he(e,t){return e.sort((function(e,t){return Math.random()-.5})).slice(0,Math.min(e.length,t))}var ge=new(function(){function e(){Object(fe.a)(this,e)}return Object(de.a)(e,[{key:"tags",value:function(e){return[]}},{key:"artists",value:function(e){return he(ve,e).map((function(e){return{name:e,type:"P"}}))}},{key:"albums",value:function(e){var t=e.map((function(e){return e.resource_uri}));return function(e){return he(pe,e).map((function(e){return{name:e,artists:he(t,2),release:"".concat(1960+Math.floor(60*Math.random()))}}))}}},{key:"songs",value:function(e){return function(t){return he(pe,t).map((function(t){var n=he(e,1)[0];return{title:t,artists:n.artists,album:n.resource_uri,length:Math.floor(100*Math.random()+100)}}))}}},{key:"playlists",value:function(e){return new Array(e).fill(null).map((function(e,t){return{name:"Playlist "+t}}))}},{key:"wait",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"seedModels",value:function(){var e=Object(d.a)(f.a.mark((function e(t,n,a,r){var c,o,l,u,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===r||void 0===r||null===(c=r.setMessage)||void 0===c||c.call(null,"Fetching ".concat(t,"s")),null===r||void 0===r||r.setProgress(0),e.next=4,p.a.fetch(t);case 4:return u=e.sent,null===r||void 0===r||r.setTotal(u.objects.length+n),null===r||void 0===r||null===(o=r.setMessage)||void 0===o||o.call(null,"Deleting ".concat(t,"s")),e.next=9,Promise.all(u.objects.map((function(e){return p.a.delete(e.resource_uri,{},!1).catch((function(e){return console.error(e)})).then((function(){return null===r||void 0===r?void 0:r.setProgress((function(e){return e+1}))}))})));case 9:return null===r||void 0===r||null===(l=r.setMessage)||void 0===l||l.call(null,"Seeding ".concat(t,"s")),e.next=12,Promise.all(a(n).map((function(e){return p.a.post(t,e,!1).catch((function(e){return console.error(e)})).then((function(){return null===r||void 0===r?void 0:r.setProgress((function(e){return e+1}))}))})));case 12:return e.next=14,p.a.fetch(t);case 14:return i=e.sent,s=i.objects,e.abrupt("return",s);case 17:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"uploadFile",value:function(){var e=Object(d.a)(f.a.mark((function e(t,a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===a||void 0===a||a.setTotal(t.length),null===a||void 0===a||a.setProgress(0),null===a||void 0===a||null===(r=a.setMessage)||void 0===r||r.call(null,"Uploading Songs"),t.map((function(){var e=n(29);console.log(e),null===a||void 0===a||a.setProgress((function(e){return e+1}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"seed",value:function(){var e=Object(d.a)(f.a.mark((function e(t){var n,a,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.seedModels("artist",20,this.artists,t);case 2:return r=e.sent,e.next=5,this.seedModels("album",20,this.albums(r),t);case 5:return c=e.sent,e.next=8,this.seedModels("song",70,this.songs(c),t);case 8:return o=e.sent,e.next=11,this.uploadFile(o,t);case 11:null===t||void 0===t||null===(n=t.setMessage)||void 0===n||n.call(null,"Done"),this.wait(200),null===t||void 0===t||t.setTotal(0),null===t||void 0===t||null===(a=t.setMessage)||void 0===a||a.call(null,null),p.a.update();case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),be=["songinplaylist","track","apikey"];function Ee(e){var t,n=e.endpoint,a=S(n),c=Object(l.a)(a,1)[0],o=null===c||void 0===c||null===(t=c.objects)||void 0===t?void 0:t.length;return c&&void 0===o?null:r.a.createElement("div",null,r.a.createElement("p",null,n),r.a.createElement("p",null,c?"".concat(o," model").concat(1===o?"":"s"):r.a.createElement(x,null)))}var ye=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(0),u=Object(l.a)(o,2),i=u[0],s=u[1],m=Object(a.useState)(null),f=Object(l.a)(m,2),d=f[0],p=f[1],v=i>0,h=S(""),g=Object(l.a)(h,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"endpoints"},g&&Object.keys(g).filter((function(e){return!be.includes(e.toLowerCase())})).map((function(e){return r.a.createElement(Ee,{key:e,endpoint:e})}))),r.a.createElement("button",{className:M()({disabled:v}),onClick:function(){return ge.seed({setProgress:c,setTotal:s,setMessage:p}).catch((function(e){return console.error(e)}))}},r.a.createElement("p",null,v?"Seeding...":"Seed!")),v&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"progress"},r.a.createElement("div",{style:{width:"".concat(n/i*100,"%")}}),r.a.createElement("p",null,n," / ",i)),r.a.createElement("p",null,d)))};var Oe=function(){return T("song",(function(e){var t=e.objects;return r.a.createElement(V,{songs:t})}))},je=n(34);n(56);function ke(e){var t=e.children;return r.a.createElement("section",{className:"single"},t)}function we(){return Object(a.useEffect)((function(){p.a.logout()})),r.a.createElement(u.a,{to:""})}function Se(e){var t,n=Object(u.g)().pathname.slice(1)+"/",c=null!==(t=e.key)&&void 0!==t?t:n.slice(0,n.indexOf("/"));return Object(a.useEffect)((function(){document.title="OSS - "+c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()}),[c]),r.a.createElement(P,{area:"page",id:c},r.a.createElement(e.component,null))}var xe=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){p.a.isLoginIn().then((function(e){return c(e)}))}));var o=Object(a.useState)(null),s=y(),m=[{path:"/songs",component:Oe},{path:"/playlists/:id?",component:se},{path:"/artists/:id?",component:Z},{path:"/albums/:id?",component:_},{path:"/songs",component:Oe},{path:"/seed",component:ye}];return r.a.createElement(ee,{value:o},r.a.createElement(b,{value:s},r.a.createElement(i.a,null,n?r.a.createElement("section",{className:"container"},r.a.createElement(ne,null),r.a.createElement(ue,null),r.a.createElement(R,null),r.a.createElement(me,null),r.a.createElement(te,{dialog:o[0]}),r.a.createElement(u.d,null,m.map((function(e){return r.a.createElement(u.b,{key:e.path,path:e.path},r.a.createElement(Se,e))})),r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement(u.a,{to:"/playlists"})),r.a.createElement(u.b,{path:"/logout"},r.a.createElement(we,null)))):r.a.createElement(ke,null,!1===n?r.a.createElement(je.a,null):r.a.createElement(x,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,n){"use strict";var a=n(3),r=n.n(a),c=n(8),o=n(21),l=n(22),u=n(23),i=n.n(u),s="".concat("","/api/v1"),m=n(31),f=n.n(m),d=new(function(){function e(){Object(o.a)(this,e),this.observers=new Set}return Object(l.a)(e,[{key:"call",value:function(e){var t=e.url,n=e.params,a=e.callback;this.fetch(t,n).then((function(e){return a(e)})).catch((function(e){return a(void 0,e)}))}},{key:"update",value:function(){var e=this;this.observers.forEach((function(t){return e.call(t)}))}},{key:"subscribe",value:function(e,t){var n=this;return{then:function(a){var r={url:e,params:t,callback:a};return n.observers.add(r),n.call(r),function(){n.observers.delete(r)}}}}},{key:"fetch",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="string"===typeof n?n:i.a.encode(null!==n&&void 0!==n?n:{}),e.abrupt("return",this.method("get","".concat(t,"/?").concat(a)));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getApiKey",value:function(){var e=localStorage.getItem("apikey");return e?JSON.parse(e):null}},{key:"isLoginIn",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.getApiKey()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",this.fetch("artist").then((function(){return!0})).catch((function(e){return console.log(e),localStorage.removeItem("apikey"),!1})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"audio",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var a,c,o,l,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=this.getApiKey()){e.next=3;break}throw new Error("Not logged in");case 3:return e.next=5,fetch(n(29),{headers:{Authorization:c.key}});case 5:return o=e.sent,e.next=8,null===(a=o.body)||void 0===a?void 0:a.getReader().read();case 8:if(null===(l=e.sent)||void 0===l?void 0:l.value){e.next=11;break}throw new Error("No audio found");case 11:return u=new Blob([l.value],{type:"audio/mp3"}),e.abrupt("return",URL.createObjectURL(u));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"method",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){var c,o,l,u,i=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=!(i.length>3&&void 0!==i[3])||i[3],o=this.getApiKey()){e.next=4;break}throw new Error("Not logged n");case 4:return(l=n).startsWith(s)||(l="".concat(s,"/").concat(l)),"get"!==t&&(l+="/"),e.next=9,fetch(l,{method:t.toUpperCase(),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:o.key},body:a?JSON.stringify(a):void 0});case 9:if(u=e.sent,c&&"get"!==t&&this.update(),200!==u.status){e.next=15;break}return e.abrupt("return",u.json());case 15:throw new Error("Not logged in");case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=!(c.length>2&&void 0!==c[2])||c[2],e.abrupt("return",this.method("post",t,n,a));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=!(c.length>2&&void 0!==c[2])||c[2],e.abrupt("return",this.method("put",t,n,a));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=!(c.length>2&&void 0!==c[2])||c[2],e.abrupt("return",this.method("delete",t,n,a));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getApiKey())){e.next=4;break}return e.next=4,this.delete("apikey/".concat(t.id)).catch((function(e){return console.error(e)}));case 4:localStorage.removeItem("apikey"),window.location.reload();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,o,l,u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(s,"/apikey/"),a=navigator,c=a.platform,o=a.vendor,l=f()(new Date),e.next=5,fetch(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Basic ".concat(t)},body:JSON.stringify({purpose:"".concat(o," ").concat(c,", ").concat(l)})});case 5:if(u=e.sent,this.update(),201===u.status){e.next=9;break}throw new Error("Invalid credentials");case 9:return e.next=11,u.json();case 11:i=e.sent,localStorage.setItem("apikey",JSON.stringify(i)),window.location.reload();case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}());t.a=d}},[[36,1,2]]]);
//# sourceMappingURL=main.36e01104.chunk.js.map